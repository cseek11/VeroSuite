<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VeroSuite Dispatcher Dashboard (Standalone)</title>
  <link rel="preconnect" href="https://unpkg.com" />
  <style>
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; background-color: #f8fafc; }
    /* Minimal utility subset used by the component */
    .min-h-screen{min-height:100vh}.bg-gray-50{background-color:#f9fafb}.bg-white{background-color:#fff}.text-white{color:#fff}
    .shadow{box-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1),0 1px 2px -1px rgb(0 0 0 / 0.1)}
    .shadow-sm{box-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05)}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-lg{border-radius:.5rem}
    .border{border:1px solid #e5e7eb}.border-b{border-bottom:1px solid #e5e7eb}.border-gray-200{border-color:#e5e7eb}.border-transparent{border-color:transparent}
    .max-w-7xl{max-width:80rem}.mx-auto{margin-left:auto;margin-right:auto}
    .px-4{padding-left:1rem;padding-right:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.p-6{padding:1.5rem}.p-4{padding:1rem}.p-3{padding:.75rem}.p-2{padding:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}
    .h-16{height:4rem}.h-8{height:2rem}.h-5{height:1.25rem}.h-4{height:1rem}.w-8{width:2rem}.w-5{width:1.25rem}.w-4{width:1rem}
    .flex{display:flex}.grid{display:grid}.items-center{align-items:center}.justify-between{justify-content:space-between}.justify-center{justify-content:center}
    .space-x-8 > :not([hidden]) ~ :not([hidden]){margin-left:2rem}.space-x-4 > :not([hidden]) ~ :not([hidden]){margin-left:1rem}.space-x-3 > :not([hidden]) ~ :not([hidden]){margin-left:.75rem}
    .space-y-6 > :not([hidden]) ~ :not([hidden]){margin-top:1.5rem}.space-y-4 > :not([hidden]) ~ :not([hidden]){margin-top:1rem}.space-y-2 > :not([hidden]) ~ :not([hidden]){margin-top:.5rem}
    .grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.md\:grid-cols-2{grid-template-columns:repeat(1,minmax(0,1fr))}@media (min-width:768px){.md\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}
    .lg\:grid-cols-4{grid-template-columns:repeat(1,minmax(0,1fr))}@media (min-width:1024px){.lg\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}
    .lg\:grid-cols-3{grid-template-columns:repeat(1,minmax(0,1fr))}@media (min-width:1024px){.lg\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}
    .gap-6{gap:1.5rem}
    .text-xl{font-size:1.25rem}.text-lg{font-size:1.125rem}.text-sm{font-size:.875rem}.text-2xl{font-size:1.5rem}.text-xs{font-size:.75rem}
    .font-semibold{font-weight:600}.font-medium{font-weight:500}.font-bold{font-weight:700}
    .text-gray-900{color:#111827}.text-gray-700{color:#374151}.text-gray-600{color:#4b5563}.text-gray-500{color:#6b7280}.text-gray-400{color:#9ca3af}
    .bg-gray-50{background:#f9fafb}.bg-yellow-50{background:#fffbeb}.bg-green-50{background:#ecfdf5}.bg-gray-200{background:#e5e7eb}
    .text-green-500{color:#22c55e}.text-green-600{color:#16a34a}.text-orange-500{color:#f97316}.text-blue-500{color:#3b82f6}
    .hover\:bg-green-700:hover{background:#15803d}.hover\:bg-green-700{transition:background .2s}.hover\:opacity-90:hover{opacity:.9}
    .underline{text-decoration:underline}
    .fixed{position:fixed}.inset-0{top:0;right:0;bottom:0;left:0}.overflow-y-auto{overflow-y:auto}.z-50{z-index:50}.top-20{top:5rem}
    .w-96{width:24rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-4{margin-left:1rem}
    .rounded-full{border-radius:9999px}.inline-flex{display:inline-flex}
    .animate-spin{animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>
  <!-- React, ReactDOM, Babel -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- Lucide Icons (ESM build is typical; we'll rely on UMD via CDN wrapper) -->
  <script type="module">
    import * as lucide from 'https://cdn.skypack.dev/lucide-react@latest?min';
    window.lucideReact = lucide;
  </script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { Calendar, MapPin, Clock, User, Phone, DollarSign, CheckCircle, AlertCircle, Plus, Search, Route, Zap, Users, Building2, BarChart3 } = window.lucideReact || {};

    if (!Calendar) {
      const fallback = () => null;
      window.lucideReact = new Proxy({}, { get: () => fallback });
    }

    // --- Paste of the component logic (trimmed styles retained) ---
    const mockTenants = {
      'ace-pest': { name: 'Ace Pest Control', theme: { primary: '#dc2626', secondary: '#991b1b', accent: '#f59e0b' } },
      'green-shield': { name: 'Green Shield Exterminators', theme: { primary: '#059669', secondary: '#047857', accent: '#0891b2' } }
    };

    const mockCustomers = [
      { id: '1', name: 'Downtown Restaurant Group', type: 'commercial', locations: [
        { id: '1a', name: 'Main Street Location', address: '123 Main St, Pittsburgh, PA', lat: 40.4406, lng: -79.9959 },
        { id: '1b', name: 'Strip District Location', address: '456 Penn Ave, Pittsburgh, PA', lat: 40.4515, lng: -79.9717 }
      ], contact: 'Sarah Johnson', phone: '(412) 555-0123', arBalance: 450.00, lastService: '2025-07-15' },
      { id: '2', name: 'Office Complex LLC', type: 'commercial', locations: [
        { id: '2a', name: 'Corporate Plaza', address: '789 Liberty Ave, Pittsburgh, PA', lat: 40.4417, lng: -79.9901 }
      ], contact: 'Mike Chen', phone: '(412) 555-0456', arBalance: 0, lastService: '2025-08-10' },
      { id: '3', name: 'Westfield Apartments', type: 'residential', locations: [
        { id: '3a', name: 'Building A', address: '321 Fifth Ave, Pittsburgh, PA', lat: 40.4472, lng: -79.9473 },
        { id: '3b', name: 'Building B', address: '325 Fifth Ave, Pittsburgh, PA', lat: 40.4475, lng: -79.9470 }
      ], contact: 'Lisa Rodriguez', phone: '(412) 555-0789', arBalance: 225.50, lastService: '2025-08-05' }
    ];

    const mockTechnicians = [
      { id: 'tech1', name: 'John Smith', phone: '(412) 555-1001', skills: ['general','commercial','rodent'], status: 'available', currentLocation: { lat: 40.4406, lng: -79.9959 } },
      { id: 'tech2', name: 'Maria Garcia', phone: '(412) 555-1002', skills: ['general','residential','termite'], status: 'in_progress', currentLocation: { lat: 40.4515, lng: -79.9717 } },
      { id: 'tech3', name: 'David Wilson', phone: '(412) 555-1003', skills: ['commercial','rodent','bed_bug'], status: 'available', currentLocation: { lat: 40.4417, lng: -79.9901 } },
    ];

    const mockJobs = [
      { id:'job1', customerId:'1', locationId:'1a', customer:'Downtown Restaurant Group', location:'Main Street Location', address:'123 Main St, Pittsburgh, PA', serviceType:'Monthly Service', status:'scheduled', priority:'high', scheduledDate:'2025-08-18', timeWindow:'09:00-11:00', technicianId:'tech1', technician:'John Smith', estimatedDuration:90, specialInstructions:'Kitchen treatment required - restaurant opens at 11 AM', value:185.00 },
      { id:'job2', customerId:'2', locationId:'2a', customer:'Office Complex LLC', location:'Corporate Plaza', address:'789 Liberty Ave, Pittsburgh, PA', serviceType:'Quarterly Service', status:'unassigned', priority:'medium', scheduledDate:'2025-08-18', timeWindow:'13:00-16:00', technicianId:null, technician:null, estimatedDuration:120, specialInstructions:'Basement and parking garage treatment', value:325.00 },
      { id:'job3', customerId:'3', locationId:'3a', customer:'Westfield Apartments', location:'Building A', address:'321 Fifth Ave, Pittsburgh, PA', serviceType:'Bed Bug Treatment', status:'in_progress', priority:'urgent', scheduledDate:'2025-08-18', timeWindow:'08:00-12:00', technicianId:'tech2', technician:'Maria Garcia', estimatedDuration:180, specialInstructions:'Units 2A, 2B, 3C - residents relocated', value:850.00 },
      { id:'job4', customerId:'1', locationId:'1b', customer:'Downtown Restaurant Group', location:'Strip District Location', address:'456 Penn Ave, Pittsburgh, PA', serviceType:'Monthly Service', status:'completed', priority:'medium', scheduledDate:'2025-08-17', timeWindow:'14:00-16:00', technicianId:'tech3', technician:'David Wilson', estimatedDuration:75, specialInstructions:'Exterior perimeter treatment', value:165.00 },
    ];

    function VeroSuiteDispatcherDashboard(){
      const [currentTenant, setCurrentTenant] = useState('ace-pest');
      const [activeTab, setActiveTab] = useState('dashboard');
      const [selectedJob, setSelectedJob] = useState(null);
      const [jobs, setJobs] = useState(mockJobs);
      const [filterStatus, setFilterStatus] = useState('all');
      const [searchTerm, setSearchTerm] = useState('');
      const [showRouteOptimization, setShowRouteOptimization] = useState(false);

      const tenant = mockTenants[currentTenant];
      const theme = tenant.theme;

      const filteredJobs = jobs.filter(job => {
        const matchesStatus = filterStatus === 'all' || job.status === filterStatus;
        const matchesSearch = job.customer.toLowerCase().includes(searchTerm.toLowerCase()) || job.location.toLowerCase().includes(searchTerm.toLowerCase());
        return matchesStatus && matchesSearch;
      });

      const getStatusColor = (status) => {
        switch(status){
          case 'scheduled': return 'bg-blue-100 text-blue-800';
          case 'unassigned': return 'bg-yellow-100 text-yellow-800';
          case 'in_progress': return 'bg-orange-100 text-orange-800';
          case 'completed': return 'bg-green-100 text-green-800';
          case 'cancelled': return 'bg-red-100 text-red-800';
          default: return 'bg-gray-100 text-gray-800';
        }
      };

      const getPriorityColor = (priority) => {
        switch(priority){
          case 'urgent': return 'text-red-600';
          case 'high': return 'text-orange-600';
          case 'medium': return 'text-yellow-600';
          case 'low': return 'text-green-600';
          default: return 'text-gray-600';
        }
      };

      const assignTechnician = (jobId, technicianId) => {
        const technician = mockTechnicians.find(t => t.id === technicianId);
        setJobs(jobs.map(job => job.id === jobId ? { ...job, technicianId, technician: technician?.name, status: 'scheduled' } : job));
        setSelectedJob(null);
      };

      const optimizeRoutes = () => {
        setShowRouteOptimization(true);
        setTimeout(() => {
          setJobs(jobs.map(job => {
            if (job.status === 'unassigned'){
              const availableTech = mockTechnicians.find(t => t.status === 'available');
              return { ...job, technicianId: availableTech?.id, technician: availableTech?.name, status: 'scheduled' };
            }
            return job;
          }));
          setShowRouteOptimization(false);
        }, 1500);
      };

      const todayJobs = jobs.filter(job => job.scheduledDate === '2025-08-18');
      const completedToday = todayJobs.filter(job => job.status === 'completed').length;
      const inProgress = todayJobs.filter(job => job.status === 'in_progress').length;
      const scheduled = todayJobs.filter(job => job.status === 'scheduled').length;
      const unassigned = todayJobs.filter(job => job.status === 'unassigned').length;
      const todayRevenue = todayJobs.filter(job => job.status === 'completed').reduce((sum, job) => sum + job.value, 0);

      return (
        <div className="min-h-screen bg-gray-50">
          <style>{`
            .theme-primary { background-color: ${theme.primary}; }
            .theme-primary-text { color: ${theme.primary}; }
            .theme-secondary { background-color: ${theme.secondary}; }
            .theme-accent { color: ${theme.accent}; }
            .theme-border { border-color: ${theme.primary}; }
            .theme-hover:hover { background-color: ${theme.primary}; }
          `}</style>

          <nav className="theme-primary shadow-sm">
            <div className="max-w-7xl mx-auto px-4">
              <div className="flex justify-between items-center h-16">
                <div className="flex items-center">
                  <span className="h-8 w-8 text-white mr-3">🏢</span>
                  <div>
                    <h1 className="text-xl font-semibold text-white">VeroSuite</h1>
                    <p className="text-sm text-white/80">{tenant.name}</p>
                  </div>
                </div>
                <div className="flex items-center space-x-4">
                  <select value={currentTenant} onChange={(e)=>setCurrentTenant(e.target.value)} className="bg-white/10 border border-white/20 rounded-md px-3 py-2 text-white text-sm">
                    <option value="ace-pest">Ace Pest Control</option>
                    <option value="green-shield">Green Shield Exterminators</option>
                  </select>
                  <div className="flex items-center text-white"><span className="h-5 w-5 mr-2">👤</span><span className="text-sm">Sarah Thompson (Dispatcher)</span></div>
                </div>
              </div>
            </div>
          </nav>

          <div className="bg-white shadow-sm border-b">
            <div className="max-w-7xl mx-auto px-4">
              <div className="flex space-x-8">
                {[
                  { id: 'dashboard', label: 'Dashboard' },
                  { id: 'jobs', label: 'Jobs & Scheduling' },
                  { id: 'customers', label: 'Customers' },
                  { id: 'routes', label: 'Route Optimization' }
                ].map(tab => (
                  <button key={tab.id} onClick={()=>setActiveTab(tab.id)} className={`flex items-center py-4 px-2 border-b-2 text-sm font-medium ${activeTab === tab.id ? 'theme-border theme-primary-text' : 'border-transparent text-gray-500'}`}>
                    {tab.label}
                  </button>
                ))}
              </div>
            </div>
          </div>

          <div className="max-w-7xl mx-auto px-4 py-6">
            {activeTab === 'dashboard' && (
              <div className="space-y-6">
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                  <div className="bg-white rounded-lg shadow p-6"><div className="flex items-center"><span className="h-8 w-8 text-green-500 mr-2">✔</span><div><p className="text-sm font-medium text-gray-600">Completed Today</p><p className="text-2xl font-semibold text-gray-900">{completedToday}</p></div></div></div>
                  <div className="bg-white rounded-lg shadow p-6"><div className="flex items-center"><span className="h-8 w-8 text-orange-500 mr-2">⏱</span><div><p className="text-sm font-medium text-gray-600">In Progress</p><p className="text-2xl font-semibold text-gray-900">{inProgress}</p></div></div></div>
                  <div className="bg-white rounded-lg shadow p-6"><div className="flex items-center"><span className="h-8 w-8 text-blue-500 mr-2">📅</span><div><p className="text-sm font-medium text-gray-600">Scheduled</p><p className="text-2xl font-semibold text-gray-900">{scheduled}</p></div></div></div>
                  <div className="bg-white rounded-lg shadow p-6"><div className="flex items-center"><span className="h-8 w-8 text-green-600 mr-2">$</span><div><p className="text-sm font-medium text-gray-600">Today's Revenue</p><p className="text-2xl font-semibold text-gray-900">${todayRevenue.toFixed(2)}</p></div></div></div>
                </div>

                {unassigned > 0 && (
                  <div className="bg-yellow-50 border-l border-yellow-400 p-4">
                    <div className="flex"><span className="h-5 w-5 text-yellow-400 mr-2">⚠</span><p className="text-sm text-yellow-700"><strong>{unassigned} jobs</strong> need technician assignment for today. <button onClick={()=>setActiveTab('jobs')} className="underline">View jobs</button> or <button onClick={optimizeRoutes} className="underline">auto-assign</button></p></div>
                  </div>
                )}

                <div className="bg-white rounded-lg shadow">
                  <div className="px-6 py-4 border-b border-gray-200"><h3 className="text-lg font-medium text-gray-900">Today's Schedule Overview</h3></div>
                  <div className="p-6">
                    <div className="space-y-4">
                      {mockTechnicians.map(tech => {
                        const techJobs = todayJobs.filter(job => job.technicianId === tech.id);
                        const totalValue = techJobs.reduce((sum, job) => sum + job.value, 0);
                        return (
                          <div key={tech.id} className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                            <div className="flex items-center"><span className="h-8 w-8 text-gray-400 mr-3">👤</span><div><p className="font-medium text-gray-900">{tech.name}</p><p className="text-sm text-gray-600">{tech.phone}</p></div></div>
                            <div className="text-right"><p className="text-sm font-medium text-gray-900">{techJobs.length} jobs</p><p className="text-sm text-gray-600">${totalValue.toFixed(2)} value</p></div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                </div>
              </div>
            )}

            {activeTab === 'jobs' && (
              <div className="space-y-6">
                <div className="flex justify-between items-center">
                  <h2 className="text-2xl font-bold text-gray-900">Jobs & Scheduling</h2>
                  <div className="flex space-x-3">
                    <button onClick={optimizeRoutes} disabled={showRouteOptimization} className="flex items-center px-4 py-2 theme-primary text-white rounded-md hover:opacity-90">
                      {showRouteOptimization ? (<><span className="animate-spin inline-block mr-2">◴</span>Optimizing...</>) : (<>⚡ Optimize Routes</>)}
                    </button>
                    <button className="flex items-center px-4 py-2" style={{background:'#16a34a', color:'#fff', borderRadius:6}}>＋ New Job</button>
                  </div>
                </div>

                <div className="flex space-x-4">
                  <div className="flex-1">
                    <div className="relative">
                      <input type="text" placeholder="Search jobs, customers, locations..." value={searchTerm} onChange={(e)=>setSearchTerm(e.target.value)} className="pl-3 pr-4 py-2 w-full border border-gray-200 rounded-md" />
                    </div>
                  </div>
                  <select value={filterStatus} onChange={(e)=>setFilterStatus(e.target.value)} className="px-4 py-2 border border-gray-200 rounded-md">
                    <option value="all">All Status</option>
                    <option value="scheduled">Scheduled</option>
                    <option value="unassigned">Unassigned</option>
                    <option value="in_progress">In Progress</option>
                    <option value="completed">Completed</option>
                  </select>
                </div>

                <div className="bg-white shadow rounded-lg overflow-hidden">
                  <div className="px-6 py-4 border-b border-gray-200"><h3 className="text-lg font-medium text-gray-900">Jobs ({filteredJobs.length})</h3></div>
                  <div className="divide-y divide-gray-200">
                    {filteredJobs.map(job => (
                      <div key={job.id} className="p-6">
                        <div className="flex items-center justify-between">
                          <div className="flex-1">
                            <div className="flex items-center space-x-4">
                              <div className="flex-shrink-0"><span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(job.status)}`}>{job.status.replace('_',' ')}</span></div>
                              <div>
                                <p className="text-sm font-medium text-gray-900">{job.customer}</p>
                                <p className="text-sm text-gray-600">{job.location} • {job.address}</p>
                              </div>
                            </div>
                            <div className="mt-2 flex items-center space-x-6 text-sm text-gray-600">
                              <div className="flex items-center">📅 {job.scheduledDate} {job.timeWindow}</div>
                              <div className="flex items-center">⏱ {job.estimatedDuration}min</div>
                              <div className="flex items-center">$ {job.value.toFixed(2)}</div>
                              <div className={`flex items-center font-medium ${getPriorityColor(job.priority)}`}>! {job.priority}</div>
                            </div>
                            {job.technician && (<div className="mt-2 flex items-center text-sm text-gray-600">👤 Assigned to: {job.technician}</div>)}
                            {job.specialInstructions && (<div className="mt-2"><p className="text-sm text-gray-600"><strong>Instructions:</strong> {job.specialInstructions}</p></div>)}
                          </div>
                          <div className="flex-shrink-0 ml-4">
                            {job.status === 'unassigned' && (<button onClick={()=>setSelectedJob(job)} className="px-4 py-2 theme-primary text-white rounded-md hover:opacity-90">Assign Tech</button>)}
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            )}

            {activeTab === 'customers' && (
              <div className="space-y-6">
                <div className="flex justify-between items-center"><h2 className="text-2xl font-bold text-gray-900">Customer Management</h2><button className="px-4 py-2 theme-primary text-white rounded-md hover:opacity-90">＋ New Customer</button></div>
                <div className="grid gap-6">
                  {mockCustomers.map(customer => (
                    <div key={customer.id} className="bg-white rounded-lg shadow p-6">
                      <div className="flex justify-between items-start">
                        <div className="flex-1">
                          <div className="flex items-center space-x-4"><h3 className="text-lg font-medium text-gray-900">{customer.name}</h3><span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${customer.type === 'commercial' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'}`}>{customer.type}</span></div>
                          <div className="mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-sm text-gray-600">
                            <div className="flex items-center">👤 {customer.contact}</div>
                            <div className="flex items-center">📞 {customer.phone}</div>
                            <div className="flex items-center">📍 {customer.locations.length} location{customer.locations.length !== 1 ? 's' : ''}</div>
                            <div className="flex items-center">💵 AR: ${customer.arBalance.toFixed(2)}</div>
                          </div>
                          <div className="mt-4"><h4 className="text-sm font-medium text-gray-900 mb-2">Locations:</h4><div className="space-y-1">{customer.locations.map(l => (<div key={l.id} className="text-sm text-gray-600">• {l.name} - {l.address}</div>))}</div></div>
                        </div>
                        <div className="flex space-x-2"><button className="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded">View History</button><button className="px-3 py-1 text-sm theme-primary text-white rounded">Schedule Service</button></div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {activeTab === 'routes' && (
              <div className="space-y-6">
                <div className="flex justify-between items-center"><h2 className="text-2xl font-bold text-gray-900">Route Optimization</h2><button onClick={optimizeRoutes} className="px-4 py-2 theme-primary text-white rounded-md hover:opacity-90">Optimize All Routes</button></div>
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  {mockTechnicians.map(tech => {
                    const techJobs = todayJobs.filter(job => job.technicianId === tech.id);
                    const totalDistance = Math.round(Math.random() * 50 + 30);
                    const totalTime = techJobs.reduce((sum, job) => sum + job.estimatedDuration, 0) + totalDistance * 2;
                    return (
                      <div key={tech.id} className="bg-white rounded-lg shadow p-6">
                        <div className="flex items-center justify-between mb-4">
                          <div className="flex items-center"><span className="h-8 w-8 text-gray-400 mr-3">👤</span><div><h3 className="font-medium text-gray-900">{tech.name}</h3><p className="text-sm text-gray-600">{tech.skills.join(', ')}</p></div></div>
                          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${tech.status === 'available' ? 'bg-green-100 text-green-800' : 'bg-orange-100 text-orange-800'}`}>{tech.status.replace('_',' ')}</span>
                        </div>
                        <div className="space-y-2 mb-4">
                          <div className="flex justify-between text-sm"><span>Jobs Today:</span><span className="font-medium">{techJobs.length}</span></div>
                          <div className="flex justify-between text-sm"><span>Total Distance:</span><span className="font-medium">{totalDistance} miles</span></div>
                          <div className="flex justify-between text-sm"><span>Estimated Time:</span><span className="font-medium">{Math.round(totalTime / 60)}h {totalTime % 60}m</span></div>
                        </div>
                        <div className="space-y-2"><h4 className="text-sm font-medium text-gray-900">Today's Route:</h4>{techJobs.length > 0 ? (<div className="space-y-1">{techJobs.map((job, i) => (<div key={job.id} className="flex items-center text-sm text-gray-600"><div className="flex-shrink-0 w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center text-xs font-medium mr-2">{i + 1}</div><div><div className="font-medium">{job.customer}</div><div className="text-xs">{job.timeWindow}</div></div></div>))}</div>) : (<p className="text-sm text-gray-500">No jobs assigned</p>)}
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>
            )}
          </div>

          {selectedJob && (
            <div className="fixed inset-0 bg-gray-600" style={{opacity:.95}}>
              <div className="relative top-20 mx-auto p-5 border w-96 shadow rounded-md bg-white">
                <div className="mt-3">
                  <h3 className="text-lg font-medium text-gray-900 mb-4">Assign Technician</h3>
                  <div className="mb-4 p-3 bg-gray-50 rounded">
                    <p className="font-medium">{selectedJob.customer}</p>
                    <p className="text-sm text-gray-600">{selectedJob.location}</p>
                    <p className="text-sm text-gray-600">{selectedJob.scheduledDate} {selectedJob.timeWindow}</p>
                  </div>
                  <div className="space-y-2">
                    <label className="text-sm font-medium text-gray-700">Select Technician:</label>
                    {mockTechnicians.map(tech => (
                      <button key={tech.id} onClick={()=>assignTechnician(selectedJob.id, tech.id)} className="w-full text-left p-3 border rounded">
                        <div className="flex items-center justify-between">
                          <div><p className="font-medium">{tech.name}</p><p className="text-sm text-gray-600">{tech.skills.join(', ')}</p></div>
                          <span className="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium" style={{background: tech.status==='available'?'#dcfce7':'#ffedd5', color: tech.status==='available'?'#166534':'#9a3412'}}>{tech.status.replace('_', ' ')}</span>
                        </div>
                      </button>
                    ))}
                  </div>
                  <div className="flex justify-center mt-4"><button onClick={()=>setSelectedJob(null)} className="px-4 py-2 border rounded">Close</button></div>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<VeroSuiteDispatcherDashboard />);
  </script>
</body>
</html>