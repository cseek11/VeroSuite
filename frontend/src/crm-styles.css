/* ===== MODERN CRM STYLING SYSTEM ===== */
/* Productivity-First Design with Clean, Modern Aesthetics */

@layer base {
  /* ===== COLOR SYSTEM ===== */
  :root {
    /* Primary Brand Colors */
    --crm-purple-50: #faf5ff;
    --crm-purple-100: #f3e8ff;
    --crm-purple-200: #e9d5ff;
    --crm-purple-300: #d8b4fe;
    --crm-purple-400: #c084fc;
    --crm-purple-500: #a855f7;
    --crm-purple-600: #8b5cf6;
    --crm-purple-700: #7c3aed;
    --crm-purple-800: #6d28d9;
    --crm-purple-900: #5b21b6;
    --crm-purple-950: #3b0764;

    /* Neutral Base Colors */
    --crm-slate-50: #f8fafc;
    --crm-slate-100: #f1f5f9;
    --crm-slate-200: #e2e8f0;
    --crm-slate-300: #cbd5e1;
    --crm-slate-400: #94a3b8;
    --crm-slate-500: #64748b;
    --crm-slate-600: #475569;
    --crm-slate-700: #334155;
    --crm-slate-800: #1e293b;
    --crm-slate-900: #0f172a;
    --crm-slate-950: #020617;

    /* Status Colors */
    --crm-success-50: #f0fdf4;
    --crm-success-100: #dcfce7;
    --crm-success-500: #10b981;
    --crm-success-600: #059669;
    --crm-success-700: #047857;

    --crm-warning-50: #fffbeb;
    --crm-warning-100: #fef3c7;
    --crm-warning-500: #f59e0b;
    --crm-warning-600: #d97706;
    --crm-warning-700: #b45309;

    --crm-error-50: #fef2f2;
    --crm-error-100: #fee2e2;
    --crm-error-500: #ef4444;
    --crm-error-600: #dc2626;
    --crm-error-700: #b91c1c;

    --crm-info-50: #eff6ff;
    --crm-info-100: #dbeafe;
    --crm-info-500: #3b82f6;
    --crm-info-600: #2563eb;
    --crm-info-700: #1d4ed8;

    /* Spacing System */
    --crm-space-xs: 0.25rem;
    --crm-space-sm: 0.5rem;
    --crm-space-md: 1rem;
    --crm-space-lg: 1.5rem;
    --crm-space-xl: 2rem;
    --crm-space-2xl: 3rem;

    /* Border Radius */
    --crm-radius-sm: 4px;
    --crm-radius-md: 8px;
    --crm-radius-lg: 12px;
    --crm-radius-xl: 16px;

    /* Shadows */
    --crm-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --crm-shadow-md: 0 1px 3px rgba(0, 0, 0, 0.1);
    --crm-shadow-lg: 0 4px 6px rgba(0, 0, 0, 0.1);
    --crm-shadow-xl: 0 10px 15px rgba(0, 0, 0, 0.1);
  }
}

/* ===== TYPOGRAPHY SYSTEM ===== */
@layer components {
  /* Heading Hierarchy */
  .crm-heading-1 {
    @apply text-3xl font-bold text-slate-900 leading-tight;
    font-size: 2rem; /* 32px */
    line-height: 1.25;
  }

  .crm-heading-2 {
    @apply text-2xl font-bold text-slate-900 leading-tight;
    font-size: 1.5rem; /* 24px */
    line-height: 1.33;
  }

  .crm-heading-3 {
    @apply text-xl font-semibold text-slate-900 leading-tight;
    font-size: 1.25rem; /* 20px */
    line-height: 1.4;
  }

  .crm-heading-4 {
    @apply text-lg font-semibold text-slate-900 leading-tight;
    font-size: 1.125rem; /* 18px */
    line-height: 1.44;
  }

  /* Body Text */
  .crm-text-body {
    @apply text-base text-slate-700 leading-relaxed;
    font-size: 1rem; /* 16px */
    line-height: 1.6;
  }

  .crm-text-secondary {
    @apply text-sm text-slate-600 leading-relaxed;
    font-size: 0.875rem; /* 14px */
    line-height: 1.57;
  }

  .crm-text-small {
    @apply text-xs text-slate-500 leading-relaxed;
    font-size: 0.75rem; /* 12px */
    line-height: 1.5;
  }

  /* Labels and Captions */
  .crm-label {
    @apply text-sm font-medium text-slate-700 leading-tight;
    font-size: 0.875rem; /* 14px */
    line-height: 1.43;
  }

  .crm-caption {
    @apply text-xs text-slate-500 leading-tight;
    font-size: 0.75rem; /* 12px */
    line-height: 1.33;
  }
}

/* ===== CARD SYSTEM ===== */
@layer components {
  .crm-card {
    @apply bg-white/90 backdrop-blur-sm border border-white/20 rounded-lg shadow-sm;
    transition: all 0.2s ease;
    backdrop-filter: blur(8px);
  }

  .crm-card:hover {
    @apply shadow-lg;
    transform: translateY(-1px);
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(255, 255, 255, 0.3);
  }

  .crm-card-header {
    @apply px-6 py-4 border-b border-white/20;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(4px);
  }

  .crm-card-body {
    @apply px-6 py-4;
  }

  .crm-card-footer {
    @apply px-6 py-4 border-t border-white/20;
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(4px);
  }

  /* Glass card variant for more transparency */
  .crm-card-glass {
    @apply bg-white/30 backdrop-blur-md border border-white/30 rounded-lg shadow-lg;
    backdrop-filter: blur(12px);
  }

  .crm-card-glass:hover {
    @apply shadow-xl;
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 0.4);
    border-color: rgba(255, 255, 255, 0.5);
  }
}

/* ===== BUTTON SYSTEM ===== */
@layer components {
  .crm-btn {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/50;
    min-height: 44px; /* Touch-friendly */
    backdrop-filter: blur(8px);
    font-size: 0.875rem; /* text-sm */
  }

  .crm-btn-primary {
    @apply bg-white/20 text-white shadow-sm;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.15);
  }

  .crm-btn-primary:hover {
    @apply shadow-md transform -translate-y-0.5;
    background: rgba(255, 255, 255, 0.25);
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
  }

  .crm-btn-primary:focus {
    @apply ring-white/50;
    background: rgba(255, 255, 255, 0.3);
  }

  .crm-btn-secondary {
    @apply bg-white/10 text-white border border-white/20 shadow-sm;
    background: rgba(255, 255, 255, 0.1);
  }

  .crm-btn-secondary:hover {
    @apply shadow-md transform -translate-y-0.5;
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
  }

  .crm-btn-secondary:focus {
    @apply ring-white/50;
    background: rgba(255, 255, 255, 0.25);
  }

  .crm-btn-success {
    @apply bg-green-500/20 text-green-100 border border-green-400/30 shadow-sm;
    background: rgba(34, 197, 94, 0.2);
  }

  .crm-btn-success:hover {
    @apply shadow-md transform -translate-y-0.5;
    background: rgba(34, 197, 94, 0.3);
    border-color: rgba(34, 197, 94, 0.4);
    box-shadow: 0 4px 12px rgba(34, 197, 94, 0.2);
  }

  .crm-btn-danger {
    @apply bg-red-500/20 text-red-100 border border-red-400/30 shadow-sm;
    background: rgba(239, 68, 68, 0.2);
  }

  .crm-btn-danger:hover {
    @apply shadow-md transform -translate-y-0.5;
    background: rgba(239, 68, 68, 0.3);
    border-color: rgba(239, 68, 68, 0.4);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
  }

  /* Button Sizes */
  .crm-btn-sm {
    @apply px-3 py-1.5 text-sm;
    min-height: 36px;
  }

  .crm-btn-lg {
    @apply px-6 py-3 text-lg;
    min-height: 52px;
  }

  /* Outline variant for better contrast on light backgrounds */
  .crm-btn-outline {
    @apply bg-white/90 text-slate-800 border border-slate-300 shadow-sm;
    backdrop-filter: blur(8px);
  }

  .crm-btn-outline:hover {
    @apply shadow-md transform -translate-y-0.5;
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(255, 255, 255, 0.3);
  }

  .crm-btn-outline:focus {
    @apply ring-white/50;
    background: rgba(255, 255, 255, 1);
  }

  /* Override disabled button styling */
  .crm-btn:disabled {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgb(30, 41, 59); /* slate-800 */
    opacity: 1;
    cursor: pointer;
  }
}

/* ===== FORM SYSTEM ===== */
@layer components {
  /* Base form styling based on topbar search template */
  .crm-input {
    @apply w-full px-3 py-1.5 bg-white/90 backdrop-blur-sm rounded-lg text-slate-800 placeholder-slate-500 transition-all duration-200;
    border: 1px solid rgba(255, 255, 255, 0.2);
    min-height: 44px; /* Touch-friendly */
    font-size: 0.875rem; /* text-sm */
  }

  .crm-input:focus {
    @apply outline-none ring-2 ring-white/50;
    border-color: rgba(255, 255, 255, 0.3);
    background-color: rgba(255, 255, 255, 0.95);
  }

  .crm-input:hover {
    background-color: rgba(255, 255, 255, 0.95);
    border-color: rgba(255, 255, 255, 0.3);
  }

  /* FORCE GLASSMORPHISM STYLING - MAXIMUM SPECIFICITY */
select.crm-select,
input.crm-input,
textarea.crm-textarea,
.crm-field select,
.crm-field input,
.crm-field textarea {
  background-color: rgba(255, 255, 255, 0.9);
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-color: rgba(255, 255, 255, 0.3);
  border-radius: 0.5rem;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  color: rgb(30, 41, 59);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  box-shadow: none;
  transition: none;
  outline: none;
}

/* PREVENT GRAY FLASH ON FOCUS */
select.crm-select:focus,
input.crm-input:focus,
textarea.crm-textarea:focus,
.crm-field select:focus,
.crm-field input:focus,
.crm-field textarea:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3);
  border-color: rgba(34, 197, 94, 0.5);
  background-color: rgba(255, 255, 255, 0.95);
  transition: none;
}

/* PREVENT GRAY FLASH ON HOVER */
select.crm-select:hover,
input.crm-input:hover,
textarea.crm-textarea:hover,
.crm-field select:hover,
.crm-field input:hover,
.crm-field textarea:hover {
  background-color: rgba(255, 255, 255, 0.95);
  border-color: rgba(255, 255, 255, 0.4);
  transition: none;
}

  /* FORCE GREEN FOCUS STATES */
  select.crm-select:focus,
  input.crm-input:focus,
  textarea.crm-textarea:focus,
  .crm-field select:focus,
  .crm-field input:focus,
  .crm-field textarea:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.3);
    border-color: rgba(34, 197, 94, 0.5);
    background-color: rgba(255, 255, 255, 0.95);
  }

  /* OVERRIDE ANY BROWSER DEFAULTS - REMOVED AGGRESSIVE OVERRIDES */

  /* TEST CSS - REMOVED - WAS OVERRIDING STYLES */

/* Override any default disabled styling */
.crm-input:disabled {
  background-color: rgba(255, 255, 255, 0.9);
  border-color: rgba(255, 255, 255, 0.2);
  color: rgb(30, 41, 59); /* slate-800 */
  opacity: 1;
  cursor: text;
  backdrop-filter: blur(4px);
}

  /* Force glassmorphism even when disabled */
  input.crm-input:disabled {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgb(30, 41, 59);
    opacity: 1;
    backdrop-filter: blur(4px);
  }


  .crm-textarea {
    @apply w-full px-3 py-1.5 bg-white/90 backdrop-blur-sm rounded-lg text-slate-800 placeholder-slate-500 transition-all duration-200 resize-vertical;
    border: 1px solid rgba(255, 255, 255, 0.2);
    min-height: 100px;
    font-size: 0.875rem; /* text-sm */
  }

  .crm-textarea:focus {
    @apply outline-none ring-2 ring-white/50;
    border-color: rgba(255, 255, 255, 0.3);
    background-color: rgba(255, 255, 255, 0.95);
  }

  .crm-textarea:hover {
    background-color: rgba(255, 255, 255, 0.95);
    border-color: rgba(255, 255, 255, 0.3);
  }

  /* Override any default disabled styling */
  .crm-textarea:disabled {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgb(30, 41, 59); /* slate-800 */
    opacity: 1;
    cursor: text;
    backdrop-filter: blur(4px);
  }

  /* Force glassmorphism even when disabled */
  textarea.crm-textarea:disabled {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgb(30, 41, 59);
    opacity: 1;
    backdrop-filter: blur(4px);
  }
  .crm-select {
    @apply w-full px-3 py-1.5 bg-white/90 backdrop-blur-sm rounded-lg text-slate-800 transition-all duration-200;
    border: 1px solid rgba(255, 255, 255, 0.2);
    min-height: 44px; /* Touch-friendly */
    font-size: 0.875rem; /* text-sm */
  }

  .crm-select:focus {
    @apply outline-none ring-2 ring-white/50;
    border-color: rgba(255, 255, 255, 0.3);
    background-color: rgba(255, 255, 255, 0.95);
  }

  .crm-select:hover {
    background-color: rgba(255, 255, 255, 0.95);
    border-color: rgba(255, 255, 255, 0.3);
  }

  /* Override any default disabled styling */
  .crm-select:disabled {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgb(30, 41, 59); /* slate-800 */
    opacity: 1;
    cursor: pointer;
    backdrop-filter: blur(4px);
  }

  /* Force glassmorphism even when disabled */
  select.crm-select:disabled {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgb(30, 41, 59);
    opacity: 1;
    backdrop-filter: blur(4px);
  }
  /* Enhanced checkbox and radio with backdrop blur */
  .crm-checkbox {
    @apply w-4 h-4 text-purple-600 border-slate-300 rounded focus:ring-2 focus:ring-white/50;
    background-color: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
  }

  .crm-radio {
    @apply w-4 h-4 text-purple-600 border-slate-300 focus:ring-2 focus:ring-white/50;
    background-color: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
  }

  /* Search input variant (matches topbar exactly) */
  .crm-search {
    @apply w-full pl-8 pr-3 py-1.5 bg-white/90 backdrop-blur-sm rounded-lg text-slate-800 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-white/50 text-sm;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .crm-search:focus {
    border-color: rgba(255, 255, 255, 0.3);
    background-color: rgba(255, 255, 255, 0.95);
  }

  .crm-search:hover {
    background-color: rgba(255, 255, 255, 0.95);
    border-color: rgba(255, 255, 255, 0.3);
  }
}

/* ===== STATUS INDICATORS ===== */
@layer components {
  .crm-status {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .crm-status-success {
    @apply bg-green-100 text-green-800;
  }

  .crm-status-warning {
    @apply bg-yellow-100 text-yellow-800;
  }

  .crm-status-error {
    @apply bg-red-100 text-red-800;
  }

  .crm-status-info {
    @apply bg-blue-100 text-blue-800;
  }

  .crm-status-neutral {
    @apply bg-slate-100 text-slate-800;
  }
}

/* ===== SELECT: GRADIENT BORDER + FOCUS OVERLAY (Glassmorphism) ===== */
@layer components {
  /* Use layered backgrounds to create a gradient border while keeping a translucent inner fill.
     Focus uses a CSS variable overlay to apply the translucent green effect without breaking the border gradient. */
  select.crm-select,
  .crm-field select {
    --crm-select-inner-bg: rgba(255, 255, 255, 0.9);
    --crm-select-border-start: var(--crm-purple-600);
    --crm-select-border-end: var(--crm-purple-900);
    --crm-select-focus-bg: rgba(34, 197, 94, 0); /* becomes 0.3 on focus */

    /* Custom caret (keeps arrow when appearance is none) */
    background:
      url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 20 20' fill='none' stroke='%2364748b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 8 10 12 14 8'/></svg>") no-repeat right 0.65rem center / 0.7rem,
      linear-gradient(var(--crm-select-focus-bg), var(--crm-select-focus-bg)) padding-box,
      linear-gradient(var(--crm-select-inner-bg), var(--crm-select-inner-bg)) padding-box,
      linear-gradient(135deg, var(--crm-select-border-start), var(--crm-select-border-end)) border-box;

    border: 1px solid transparent;
    border-radius: 0.5rem; /* 8px */
    color: rgb(30, 41, 59); /* slate-800 */
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    box-shadow: 0 1px 2px rgba(2, 6, 23, 0.05); /* subtle */
    min-height: 44px;
    padding: 0.375rem 2rem 0.375rem 0.75rem; /* room for caret */
  }

  /* Focus state: apply translucent green overlay while preserving the gradient border */
  select.crm-select:focus,
  .crm-field select:focus {
    --crm-select-focus-bg: rgba(34, 197, 94, 0.3);
    outline: none;
  }
}

/* ===== LAYOUT UTILITIES ===== */
@layer utilities {
  .crm-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .crm-section {
    @apply mb-8;
  }

  .crm-grid {
    @apply grid gap-6;
  }

  .crm-grid-2 {
    @apply grid grid-cols-1 md:grid-cols-2 gap-6;
  }

  .crm-grid-3 {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6;
  }

  .crm-grid-4 {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6;
  }
}

/* ===== ANIMATIONS ===== */
@layer utilities {
  @keyframes crmFadeInUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .crm-fade-in-up {
    animation: crmFadeInUp 0.3s ease-out;
  }

  @keyframes crmPulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  .crm-pulse {
    animation: crmPulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
}

/* ===== RESPONSIVE DESIGN ===== */
@layer utilities {
  /* Mobile-first responsive utilities */
  .crm-responsive-text {
    @apply text-sm sm:text-base;
  }

  .crm-responsive-spacing {
    @apply p-4 sm:p-6 lg:p-8;
  }

  .crm-responsive-grid {
    @apply grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4;
  }
}

/* ===== ACCESSIBILITY ===== */
@layer utilities {
  .crm-focus-visible {
    @apply focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2;
  }

  .crm-sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
  }
}

/* ===== GLOBAL FORM ELEMENT PURPLE THEMING ===== */
/* Override default gray styling with purple theme - NO GRAY FORMS */
@layer components {
  /* Apply purple theming to all standard form inputs */
  input[type="text"]:not(.custom-styled),
  input[type="email"]:not(.custom-styled),
  input[type="password"]:not(.custom-styled),
  input[type="search"]:not(.custom-styled),
  input[type="tel"]:not(.custom-styled),
  input[type="url"]:not(.custom-styled),
  input[type="number"]:not(.custom-styled),
  select:not(.custom-styled),
  textarea:not(.custom-styled) {
    @apply bg-white border-purple-200 text-gray-900;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }

  input[type="text"]:not(.custom-styled):focus,
  input[type="email"]:not(.custom-styled):focus,
  input[type="password"]:not(.custom-styled):focus,
  input[type="search"]:not(.custom-styled):focus,
  input[type="tel"]:not(.custom-styled):focus,
  input[type="url"]:not(.custom-styled):focus,
  input[type="number"]:not(.custom-styled):focus,
  select:not(.custom-styled):focus,
  textarea:not(.custom-styled):focus {
    @apply border-purple-500 ring-2 ring-purple-500 ring-opacity-50;
    outline: none;
  }

  input[type="text"]:not(.custom-styled):hover,
  input[type="email"]:not(.custom-styled):hover,
  input[type="password"]:not(.custom-styled):hover,
  input[type="search"]:not(.custom-styled):hover,
  input[type="tel"]:not(.custom-styled):hover,
  input[type="url"]:not(.custom-styled):hover,
  input[type="number"]:not(.custom-styled):hover,
  select:not(.custom-styled):hover,
  textarea:not(.custom-styled):hover {
    @apply border-purple-300;
  }

  /* Ensure disabled inputs follow purple theme but are muted */
  input[type="text"]:not(.custom-styled):disabled,
  input[type="email"]:not(.custom-styled):disabled,
  input[type="password"]:not(.custom-styled):disabled,
  input[type="search"]:not(.custom-styled):disabled,
  input[type="tel"]:not(.custom-styled):disabled,
  input[type="url"]:not(.custom-styled):disabled,
  input[type="number"]:not(.custom-styled):disabled,
  select:not(.custom-styled):disabled,
  textarea:not(.custom-styled):disabled {
    @apply bg-purple-50 border-purple-200 text-gray-600;
    opacity: 0.7;
    cursor: not-allowed;
  }

  /* Override any potential gray border classes */
  .border-gray-300 {
    @apply border-purple-200 !important;
  }

  .border-gray-400 {
    @apply border-purple-300 !important;
  }

  /* Focus states should always use purple */
  .focus\:border-transparent:focus {
    @apply border-purple-500 !important;
  }
}

