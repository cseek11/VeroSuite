/* ===== UNIFIED CRM STYLING SYSTEM ===== */
/* Clean, Modern Design with No Conflicts */

@layer base {
  /* ===== COLOR SYSTEM ===== */
  :root {
    /* Primary Brand Colors */
    --crm-purple-50: #faf5ff;
    --crm-purple-100: #f3e8ff;
    --crm-purple-200: #e9d5ff;
    --crm-purple-300: #d8b4fe;
    --crm-purple-400: #c084fc;
    --crm-purple-500: #a855f7;
    --crm-purple-600: #8b5cf6;
    --crm-purple-700: #7c3aed;
    --crm-purple-800: #6d28d9;
    --crm-purple-900: #5b21b6;
    --crm-purple-950: #3b0764;

    /* Neutral Base Colors */
    --crm-slate-50: #f8fafc;
    --crm-slate-100: #f1f5f9;
    --crm-slate-200: #e2e8f0;
    --crm-slate-300: #cbd5e1;
    --crm-slate-400: #94a3b8;
    --crm-slate-500: #64748b;
    --crm-slate-600: #475569;
    --crm-slate-700: #334155;
    --crm-slate-800: #1e293b;
    --crm-slate-900: #0f172a;
    --crm-slate-950: #020617;

    /* Status Colors */
    --crm-success-50: #f0fdf4;
    --crm-success-100: #dcfce7;
    --crm-success-500: #10b981;
    --crm-success-600: #059669;
    --crm-success-700: #047857;

    --crm-warning-50: #fffbeb;
    --crm-warning-100: #fef3c7;
    --crm-warning-500: #f59e0b;
    --crm-warning-600: #d97706;
    --crm-warning-700: #b45309;

    --crm-error-50: #fef2f2;
    --crm-error-100: #fee2e2;
    --crm-error-500: #ef4444;
    --crm-error-600: #dc2626;
    --crm-error-700: #b91c1c;

    --crm-info-50: #eff6ff;
    --crm-info-100: #dbeafe;
    --crm-info-500: #3b82f6;
    --crm-info-600: #2563eb;
    --crm-info-700: #1d4ed8;
  }
}

@layer components {
  /* ===== FORM COMPONENTS ===== */
  .crm-input {
    @apply w-full px-2 py-1.5 rounded-md text-slate-800 placeholder-slate-500 transition-all duration-200;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(4px);
    height: calc(32px * var(--density-scale, 1)); /* Density-aware: scales with mode */
    font-size: calc(0.875rem * var(--density-scale, 1));
  }

  .crm-input:focus {
    @apply outline-none;
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3); /* indigo-500 */
    border-color: rgba(99, 102, 241, 0.5); /* indigo-500 */
    background-color: rgba(255, 255, 255, 0.95);
  }

  .crm-input:hover {
    background-color: rgba(255, 255, 255, 0.95);
    border-color: rgba(255, 255, 255, 0.4);
  }

  .crm-input:disabled {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgb(30, 41, 59);
    opacity: 1;
    cursor: text;
    backdrop-filter: blur(4px);
  }

  .crm-textarea {
    @apply w-full px-2 py-1.5 rounded-md text-slate-800 placeholder-slate-500 transition-all duration-200 resize-vertical;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(4px);
    min-height: 100px;
    font-size: 0.875rem;
  }

  .crm-textarea:focus {
    @apply outline-none;
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3); /* indigo-500 */
    border-color: rgba(99, 102, 241, 0.5); /* indigo-500 */
    background-color: rgba(255, 255, 255, 0.95);
  }

  .crm-textarea:hover {
    background-color: rgba(255, 255, 255, 0.95);
    border-color: rgba(255, 255, 255, 0.4);
  }

  .crm-textarea:disabled {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgb(30, 41, 59);
    opacity: 1;
    cursor: text;
    backdrop-filter: blur(4px);
  }

  .crm-select {
    @apply w-full px-2 py-1.5 rounded-md text-slate-800 transition-all duration-200;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(4px);
    height: calc(32px * var(--density-scale, 1)); /* Density-aware: scales with mode */
    font-size: calc(0.875rem * var(--density-scale, 1));
  }

  .crm-select:focus {
    @apply outline-none;
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3); /* indigo-500 */
    border-color: rgba(99, 102, 241, 0.5); /* indigo-500 */
    background-color: rgba(255, 255, 255, 0.95);
  }

  .crm-select:hover {
    background-color: rgba(255, 255, 255, 0.95);
    border-color: rgba(255, 255, 255, 0.4);
  }

  .crm-select:disabled {
    background-color: rgba(255, 255, 255, 0.9);
    border-color: rgba(255, 255, 255, 0.2);
    color: rgb(30, 41, 59);
    opacity: 1;
    cursor: text;
    backdrop-filter: blur(4px);
  }

  /* ===== BUTTON COMPONENTS ===== */
  .crm-button {
    @apply px-3 py-1.5 rounded-md font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2;
    height: calc(32px * var(--density-scale, 1)); /* Density-aware: scales with mode */
    font-size: calc(0.875rem * var(--density-scale, 1));
  }

  .crm-button-primary {
    @apply crm-button bg-purple-600 text-white hover:bg-purple-700 focus:ring-purple-500;
  }

  .crm-button-secondary {
    @apply crm-button bg-slate-200 text-slate-900 hover:bg-slate-300 focus:ring-slate-500;
  }

  .crm-button-outline {
    @apply crm-button border border-slate-300 text-slate-700 hover:bg-slate-50 focus:ring-slate-500;
  }

  .crm-button-danger {
    @apply crm-button bg-red-600 text-white hover:bg-red-700 focus:ring-red-500;
  }

  .crm-button-success {
    @apply crm-button bg-green-600 text-white hover:bg-green-700 focus:ring-green-500;
  }

  /* ===== FIELD COMPONENTS ===== */
  .crm-field {
    @apply space-y-2;
  }

  .crm-label {
    @apply block text-sm font-medium text-slate-700;
  }

  .crm-error {
    @apply text-sm text-red-600;
  }

  .crm-help {
    @apply text-sm text-slate-500;
  }

  /* ===== CARD COMPONENTS ===== */
  .crm-card {
    @apply bg-white rounded-lg shadow-sm border border-slate-200;
  }

  .crm-card-header {
    @apply px-6 py-4 border-b border-slate-200;
  }

  .crm-card-content {
    @apply px-6 py-4;
  }

  .crm-card-footer {
    @apply px-6 py-4 border-t border-slate-200;
  }

  /* ===== STATUS COMPONENTS ===== */
  .crm-status {
    @apply inline-flex px-2 py-1 text-xs font-semibold rounded-full;
  }

  .crm-status-success {
    @apply crm-status bg-green-100 text-green-800;
  }

  .crm-status-warning {
    @apply crm-status bg-yellow-100 text-yellow-800;
  }

  .crm-status-error {
    @apply crm-status bg-red-100 text-red-800;
  }

  .crm-status-info {
    @apply crm-status bg-blue-100 text-blue-800;
  }

  .crm-status-neutral {
    @apply crm-status bg-slate-100 text-slate-800;
  }

  /* ===== NAVIGATION COMPONENTS ===== */
  .crm-nav-item {
    @apply flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors duration-200;
  }

  .crm-nav-item-active {
    @apply crm-nav-item bg-purple-100 text-purple-700;
  }

  .crm-nav-item-inactive {
    @apply crm-nav-item text-slate-600 hover:bg-slate-100 hover:text-slate-900;
  }

  /* ===== TABLE COMPONENTS ===== */
  .crm-table {
    @apply min-w-full divide-y divide-slate-200;
  }

  .crm-table-header {
    @apply bg-slate-50;
  }

  .crm-table-header-cell {
    @apply px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider;
  }

  .crm-table-body {
    @apply bg-white divide-y divide-slate-200;
  }

  .crm-table-row {
    @apply hover:bg-slate-50;
    height: var(--row-height, 44px); /* Density-aware: 40px/44px/48px */
  }

  .crm-table-cell {
    @apply px-3 py-2 whitespace-nowrap text-sm text-slate-900;
  }

  /* ===== MODAL COMPONENTS ===== */
  .crm-modal-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50;
  }

  .crm-modal {
    @apply bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto;
  }

  .crm-modal-header {
    @apply px-6 py-4 border-b border-slate-200;
  }

  .crm-modal-content {
    @apply px-6 py-4;
  }

  .crm-modal-footer {
    @apply px-6 py-4 border-t border-slate-200 flex justify-end gap-2;
  }

  /* ===== SEARCH COMPONENTS ===== */
  .crm-search-input {
    @apply crm-input pl-10;
  }

  .crm-search-icon {
    @apply absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400;
  }

  /* ===== LOADING COMPONENTS ===== */
  .crm-loading {
    @apply animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600;
  }

  .crm-loading-overlay {
    @apply absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center;
  }
}

/* ===== GLOBAL FORM OVERRIDES ===== */
/* Ensure all form elements use our styling system */
input:not([type="checkbox"]):not([type="radio"]):not([type="file"]):not(.crm-input) {
  @apply crm-input;
}

textarea:not(.crm-textarea) {
  @apply crm-textarea;
}

select:not(.crm-select) {
  @apply crm-select;
}

/* Override any gray backgrounds on form elements */
input:not([type="checkbox"]):not([type="radio"]):not([type="file"]),
textarea,
select {
  background-color: rgba(255, 255, 255, 0.9) !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
}

input:not([type="checkbox"]):not([type="radio"]):not([type="file"]):focus,
textarea:focus,
select:focus {
  background-color: rgba(255, 255, 255, 0.95) !important;
  border-color: rgba(99, 102, 241, 0.5) !important; /* indigo-500 */
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3) !important; /* indigo-500 */
}

/* Override Tailwind's default form styles */
.border-gray-300 {
  border-color: rgba(255, 255, 255, 0.3) !important;
}

.bg-gray-50,
.bg-gray-100,
.bg-gray-200 {
  background-color: rgba(255, 255, 255, 0.9) !important;
}

/* Override focus ring colors - Use indigo per DESIGN_SYSTEM.md */
.focus\:ring-blue-500:focus {
  --tw-ring-color: rgba(99, 102, 241, 0.3) !important; /* indigo-500 */
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3) !important; /* indigo-500 */
}

.focus\:border-blue-500:focus {
  border-color: rgba(99, 102, 241, 0.5) !important; /* indigo-500 */
}