# Two-Brain Model: Comprehensive Conflict Report

**Date:** 2025-12-05  
**Status:** Investigation Complete  
**Severity:** Multiple conflicts found

---

## Executive Summary

Found **multiple files** that still reference old Single-Brain Model paths and concepts. These conflicts will cause the LLM (Brain B) to try loading heavy rule files that should only be in Brain A's (enforcer's) context.

**Critical Issues:** 3  
**Warning Issues:** 5  
**Documentation Issues:** Multiple

---

## üî¥ CRITICAL CONFLICTS (Must Fix)

### 1. `.cursor/rules.yml` - References Old Rule Paths

**File:** `.cursor/rules.yml`  
**Problem:** Lists all heavy rules in `.cursor/rules/` instead of `.cursor/enforcement/rules/`  
**Impact:** May cause Cursor to try loading old paths  
**Status:** ‚ùå **BLOCKING**

**Current Content:**
```yaml
include:
  - .cursor/rules/00-master.mdc          # Should be .cursor/enforcement/rules/00-master.mdc
  - .cursor/rules/01-enforcement.mdc     # Should be .cursor/enforcement/rules/01-enforcement.mdc
  - .cursor/rules/02-core.mdc            # Should be .cursor/enforcement/rules/02-core.mdc
  # ... all other rules
```

**Fix Required:**
- Update all paths to `.cursor/enforcement/rules/`
- Or mark file as deprecated/legacy
- Or delete if not needed (Cursor auto-discovers .mdc files)

---

### 2. `.cursor/context_manager/recommendations.md` - References Old Rule Paths

**File:** `.cursor/context_manager/recommendations.md`  
**Problem:** Tells LLM to load rules from `.cursor/rules/` that are now in `.cursor/enforcement/rules/`  
**Impact:** LLM will try to load heavy rules into context (defeats Two-Brain Model)  
**Status:** ‚ùå **BLOCKING**

**Current Content:**
```markdown
- `@.cursor/rules/python_bible.mdc` (PRIMARY - REQUIRED: Load with @ mention)
- `@.cursor/rules/02-core.mdc` (PRIMARY - REQUIRED: Load with @ mention)
- `@.cursor/rules/08-backend.mdc` (OPTIONAL - Load manually if needed)
```

**Also Contains:**
- Step 0.5 and Step 4.5 instructions (Single-Brain Model concepts)
- Context loading/unloading instructions (should be Brain A's job)

**Fix Required:**
- Update all rule paths to `.cursor/enforcement/rules/`
- Remove Step 0.5/4.5 instructions (these are enforcer-only)
- Note: This file is auto-generated by enforcer - may need to update enforcer code

---

### 3. `.cursor/context_manager/context_profiles.yaml` - References Old Rule Paths

**File:** `.cursor/context_manager/context_profiles.yaml`  
**Problem:** Defines context requirements using old rule paths  
**Impact:** Enforcer will generate recommendations with wrong paths  
**Status:** ‚ùå **BLOCKING**

**Current Content:**
```yaml
required:
  - "@.cursor/rules/python_bible.mdc"
  - "@.cursor/rules/02-core.mdc"
optional:
  - "@.cursor/rules/08-backend.mdc"
```

**Fix Required:**
- Update all paths to `.cursor/enforcement/rules/`
- This is used by enforcer to generate recommendations

---

## ‚ö†Ô∏è WARNING CONFLICTS (Should Fix)

### 4. `.cursor/context_manager/context_state.json` - References Old Rule Paths

**File:** `.cursor/context_manager/context_state.json`  
**Problem:** Tracks active context using old paths  
**Impact:** May cause confusion, but less critical (state file)  
**Status:** ‚ö†Ô∏è **WARNING**

**Current Content:**
```json
{
  "active": [
    "@.cursor/rules/02-core.mdc",
    "@.cursor/rules/python_bible.mdc"
  ]
}
```

**Fix Required:**
- Update paths to `.cursor/enforcement/rules/`
- Or clear/reset state file

---

### 5. `.cursor/context_manager/dashboard.md` - References Old Rule Paths

**File:** `.cursor/context_manager/dashboard.md`  
**Problem:** Shows context status with old paths  
**Impact:** Misleading information, but less critical  
**Status:** ‚ö†Ô∏è **WARNING**

**Fix Required:**
- Update paths to `.cursor/enforcement/rules/`
- Note: This file is auto-generated

---

### 6. `.cursor/scripts/auto-enforcer.py` - Step 0.5/4.5 Instructions

**File:** `.cursor/scripts/auto-enforcer.py`  
**Problem:** Generates recommendations.md with Step 0.5/4.5 instructions  
**Impact:** LLM sees Single-Brain Model instructions  
**Status:** ‚ö†Ô∏è **WARNING**

**Lines to Check:**
- Line 4000-4040: Step 0.5 instructions
- Line 4298-4337: Step 0.5/4.5 instructions
- Line 4515-4570: Context loading instructions

**Fix Required:**
- Remove Step 0.5/4.5 instructions from generated recommendations
- These should be enforcer-only, not in LLM context
- Update `_generate_recommendations_file()` method

---

### 7. `.cursor/enforcement/rules/context/context-schema_prisma.mdc` - Step 0.5/4.5 Instructions

**File:** `.cursor/enforcement/rules/context/context-schema_prisma.mdc`  
**Problem:** Contains Step 0.5/4.5 instructions  
**Impact:** If this file is loaded by LLM, it will see Single-Brain Model concepts  
**Status:** ‚ö†Ô∏è **WARNING**

**Note:** This file is in `.cursor/enforcement/rules/` (correct location), but if it's ever loaded by LLM, it conflicts.

**Fix Required:**
- Verify this file is NOT loaded by LLM (should be enforcer-only)
- If it is loaded, remove Step 0.5/4.5 instructions

---

### 8. `.cursorrules.two-brain` - Backup File

**File:** `.cursorrules.two-brain`  
**Problem:** Duplicate/backup file  
**Impact:** None (not loaded), but confusing  
**Status:** ‚ö†Ô∏è **WARNING**

**Fix Required:**
- Delete or rename to `.cursorrules.two-brain.backup`
- Keep as reference if needed

---

## üìã DOCUMENTATION CONFLICTS (Informational)

### 9. Multiple Documentation Files

**Files:**
- `docs/architecture/TWO_BRAIN_*.md` files (multiple)
- Various investigation reports
- Backup files

**Problem:** Reference old paths in documentation  
**Impact:** Misleading documentation, but doesn't affect runtime  
**Status:** üìã **INFORMATIONAL**

**Fix Required:**
- Update documentation as needed
- Lower priority

---

## Summary of Required Actions

### Immediate (Critical):
1. ‚úÖ Update `.cursorrules` - **DONE** (already fixed)
2. ‚ùå Update `.cursor/rules.yml` - Update paths or mark deprecated
3. ‚ùå Update `.cursor/context_manager/recommendations.md` - Fix paths (or update enforcer code)
4. ‚ùå Update `.cursor/context_manager/context_profiles.yaml` - Fix all paths

### Soon (Warning):
5. ‚ö†Ô∏è Update `.cursor/context_manager/context_state.json` - Fix paths
6. ‚ö†Ô∏è Update `.cursor/context_manager/dashboard.md` - Fix paths
7. ‚ö†Ô∏è Update `.cursor/scripts/auto-enforcer.py` - Remove Step 0.5/4.5 from recommendations
8. ‚ö†Ô∏è Verify `.cursor/enforcement/rules/context/context-schema_prisma.mdc` is not loaded by LLM

### Later (Documentation):
9. üìã Update documentation files as needed

---

## Path Update Pattern

**Old Path:**
```
@.cursor/rules/00-master.mdc
@.cursor/rules/01-enforcement.mdc
@.cursor/rules/02-core.mdc
@.cursor/rules/python_bible.mdc
```

**New Path:**
```
@.cursor/enforcement/rules/00-master.mdc
@.cursor/enforcement/rules/01-enforcement.mdc
@.cursor/enforcement/rules/02-core.mdc
@.cursor/enforcement/rules/python_bible.mdc
```

---

## Notes

1. **Auto-Generated Files:** Some files (like `recommendations.md`, `dashboard.md`) are auto-generated by the enforcer. These need to be fixed in the enforcer code, not manually.

2. **Context Manager:** The context manager system was designed for Single-Brain Model. In Two-Brain Model, Brain A (enforcer) manages context, so some of these files may need architectural changes.

3. **Step 0.5/4.5:** These are Single-Brain Model concepts where the LLM managed its own context. In Two-Brain Model, the enforcer manages context, so these instructions shouldn't be in LLM-facing files.

---

**Next Steps:**
1. Fix critical conflicts first
2. Test that LLM only loads 3-4 lightweight files
3. Verify enforcer still works correctly
4. Update documentation











