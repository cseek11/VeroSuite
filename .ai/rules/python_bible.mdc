---
description: "Python Bible rules extracted from SSM"
alwaysApply: false
applyWhen:
  - "**/*.py"  # Python files
  - "**/*.pyi"  # Python stub files
  - "**/requirements*.txt"  # Python dependencies
  - "**/setup.py"  # Python setup
  - "**/pyproject.toml"  # Python project config
  - "**/Pipfile"  # Python pipenv
  - "**/poetry.lock"  # Python poetry
  - ".cursor/scripts/*.py"  # Python scripts
sources:
  - bible-ssm
severityDefault: warning
version: 1.0.0
---

# Python Bible ‚Äì Enforcement Rules (Auto-Generated)

> This file is generated from the SSM Bible. Edit the source Bible and re-run the pipeline instead of editing this file directly.

**Last Updated:** 2025-12-04

## Anti-Patterns (DO NOT)

### BLK-091ef683584d86aa
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

üéØ "I want to write production Python in 2 weeks" 1.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-2354244a31906b9e
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

üéØ "I'm optimizing Python performance" 1.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-2987e1cca18bc10a
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

1.9 Common Beginner Pitfalls (Preview).

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-f9dd76fd24a92c69
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Subtle pitfalls around mutability, aliasing, copying.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-feef955cd2818fbb
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

2.17 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-68dc41f0ca71f7d6
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

3.18 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-4e5483aa9e327eb3
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

4.3.3 Mutability Table Type Mutable? int ‚ùå float ‚ùå str ‚ùå tuple ‚ùå (but may contain mutable values) bytes ‚ùå bool ‚ùå list ‚úîÔ∏è dict ‚úîÔ∏è set ‚úîÔ∏è bytearray ‚úî...

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-4ef2fbd9a05a767e
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

4.12 Type System Pitfalls.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-f8079d4833cf499b
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

5.9 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-f6dc0f1a5aae1e95
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Add(1, 2) # OK add(a=1, b=2) # ‚ùå.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-a754f9317428f91b
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

6.16 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-b39660dae201f980
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Avoid when: - Need dynamic attributes - Using multiple inheritance with classes that don't have slots - Need weak references (unless __weakref__ ...

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-0f16b91d37486eb2
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

7.17 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-877ce6ebd5615e47
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

8.14 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-854d6414e4c6fd97
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

9.13 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-6cd8ea073909e4a2
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Exception Appropriate When ValueError wrong value given TypeError wrong argument type KeyError missing dict key IndexError index out of range ZeroD...

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-0a17de4e782787fd
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

10.10 Error Handling Anti-Patterns.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-0a9916e50929db7e
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

10.17 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-264ea7af0413b5f0
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

11.17 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-2c73c789b53b4306
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

12.16 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-3406508d6be0f3a5
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

13.4.2 dotenv pitfalls.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-8ee6efa03be2cfe4
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå pickle ‚ùå shelve ‚ùå marshal ‚ùå PyYAML load().

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-41948bbeb368eb78
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

13.12 Secure API Design 1.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-2d48db8e19d0bc1d
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå manual SQL queries ‚ùå storing plaintext passwords ‚ùå trusting user-supplied IDs ‚ùå rendering raw HTML ‚ùå returning internal error messages ‚ùå disablin...

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-f0ff6279922e1356
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

13.16 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-3d9893fcbaec6c99
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

14.17 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-5d944ae535ecb59b
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

16.6 Dockerization for Python Applications 16.6.1 Base Python Image Pitfalls.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-c032999e0a15b09e
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå python:latest ‚ùå python:3.12-slim with no pinned version.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-80b3b64216ca53c5
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

16.13 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-4e22c38edf646a31
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

17.6.5 Multiprocessing Pitfalls: Common Mistakes.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-09691b8dd4d90241
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Try This: Avoid common pitfalls:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-2de7d694d1c74389
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

17.16 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-5a97adc5d6f2619e
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

18.2.3 Metaclass Anti-Patterns.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-1453dea83f0a2bc2
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

18.15 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-5ddcd5185f69f1f3
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Cur.execute(f"SELECT * FROM users WHERE id={user_id}") # ‚ùå SQL injection.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-2e08b20ad979f38e
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

20.16 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-8250e030fd8e2457
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

C = Consumer({"bootstrap.servers": "localhost"}) c.subscribe(["events"]) msg = c.poll(1.0).

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-660a186d05fcac4b
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

21.16 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-558e1291b05020b1
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

C = Consumer({ "bootstrap.servers": "localhost", "group.id": "mygroup", }) c.subscribe(["events"]).

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-b0d39043a2f72909
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Avoid anti-patterns like long-running sync tasks in APIs.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-7101e98c4b89a367
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

How docstrings work at the compiler and runtime level - The differences between Google, NumPy, and Sphinx/RST styles - How to document modules, cla...

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-367b21ebac40e51a
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

# 30.4 Pitfalls & Warnings.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-ffcfd57551dcb7fa
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

## 30.4.1 Anti-Patterns.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-9a6504ec0dac6ea6
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Do not write vague docstrings:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-6b7bfc3f830d1d8a
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Do not restate the function name:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-e72b7d39550c7d23
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Do not omit exceptions:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-61b751b165b0cfe0
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Do not include implementation details:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-95dadeb229291563
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå API keys, tokens, or credentials - ‚ùå Internal server names or infrastructure details - ‚ùå Security algorithms or salt values - ‚ùå Database schemas ...

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-4a9f78ec12a038d6
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

## 30.4.4 Common Pitfalls.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-0d98e7c17490ad05
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

26.15 Deployment Anti-Patterns.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-78e5549e986fc77c
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Avoid anti-patterns early.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-ab3c6f1dcf6fcfe9
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Python 2.7 only (Python 2 EOL was 2020) ‚ùå No Python 3 support (experimental only) ‚ùå Minimal active development ‚ùå Declining community.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-a3ea23a51b7aab74
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Python 3 support is experimental (not production-ready) ‚ùå Smaller ecosystem than CPython ‚ùå Limited third-party library support ‚ùå Performance may ...

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-dae8791f61b10a43
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Not production-ready (missing features, compatibility issues) ‚ùå Limited standard library support ‚ùå Performance may lag CPython (not optimized yet).

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-2d3fdb621551b2b5
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

29.11 Anti-Patterns & Gotchas.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-76c48f0728b99310
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Wrong async/sync mixing async def foo(): time.sleep(2) # blocks event loop.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-8fd51d5618c5ce42
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Gotchas, warnings, and anti-patterns.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-48e57683b1153bd0
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

A.1 Singleton Pattern üîß Use With Caution (Common Anti-Pattern).

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-6ebd8f484a6766bb
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Anti-Pattern: Global State Mutation.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-9da25c1813ec163c
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Anti-Pattern: Over-Complicated Factory.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-77daf7de360d12e0
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Anti-Pattern: Global Dependencies.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-b2d2716c57ac0487
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

A.17 Anti-Patterns & Warnings ‚ùå Overusing OOP patterns in Python.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-17e2d33e1c47b7f7
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Factories where simple callables suffice ‚ùå Strategy classes instead of functions.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-a4ce60bba2d8e84f
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Excessive class hierarchies.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-068e11b9e891a9dc
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Callback Hell (Anti-pattern).

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-7ff6a25e705ad595
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Venomous Patterns (Anti-patterns).

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-8af65c7ef14c5de7
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

üìò APPENDIX E ‚Äî COMMON GOTCHAS & PITFALLS A Comprehensive Guide to Python‚Äôs Most Dangerous Mistakes.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-e4d9ee192587364d
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Python is easy to write but has deep semantic traps that bite developers at all levels.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-c812e76a484cc1f5
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Boolean trap patterns.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-64308a5e2c6fefab
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Each pitfall includes:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-08ae7cc1f439d3a2
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

üî• D.8 ‚Äî ASYNC PITFALLS.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-796dcecd021308b3
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

The async/await model is powerful but has subtle traps that can deadlock or degrade performance.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-5bd66661c60a8deb
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

üî• D.9 ‚Äî GIL & CONCURRENCY TRAPS.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-84f07a8bc7b6c9e2
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Assuming threading speeds up numerical computations - Not using locks because "GIL prevents races" (wrong!) - Using threads for CPU-bound work inst...

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-9254e948c59a9b29
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

üî• D.10 ‚Äî TYPING PITFALLS.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-41808f335d4494cc
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Python's type system is optional and has subtle traps.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-2b46007200ca25d0
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Wrong TypeVar Constraints.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-32e2e91c62c46f70
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

See also: Chapter 4 (Type System) for complete typing coverage.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-91f21a997ae35316
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå CRITICAL SECURITY RISK:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-764680b5afdbddb9
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

See also: Chapter 13 (Security) for comprehensive security coverage.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-53082509b0f06b46
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

üî• D.13 ‚Äî ERROR HANDLING PITFALLS.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-aa98b2f0ea192fb7
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Python's exception handling is powerful but has dangerous traps.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-95518f0c0fa87836
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå CRITICAL MISTAKE:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-1b8418bf96cf81c8
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Common Confusion:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-f95dec394a971b93
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Surprising Behavior:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### BLK-3b12c7ae856d718d
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå Common Misunderstanding:.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-277-7561
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

1.6 When You Should (and Shouldn't) Use Python

**Preferred Alternative / Solution:**

(and Shouldn't) Use Python

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-336-7562
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

‚ùå Less Ideal

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-482-7563
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

1. Mutable default arguments

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-2192-7564
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

float	‚ùå

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-3178-7565
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

add(1, 2)   # OK

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-3551-7566
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ö† Late binding closures

**Preferred Alternative / Solution:**

with)

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-3983-7567
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Avoid when:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-5939-7568
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Python 3.7+: Regular `dict` is usually sufficient

**Preferred Alternative / Solution:**

Need `move_to_end()` or `popitem(last=False)`

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-7866-7569
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

HTTP requests (use `requests` or `httpx`)

**Preferred Alternative / Solution:**

Custom protocols (not HTTP)

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-7955-7570
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

disable certificate verification in production

**Preferred Alternative / Solution:**

Always use `create_default_context()` for production

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-9094-7571
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ö† ignore exception chaining

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-9210-7572
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Lower layers must NOT import upper layers

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-9212-7573
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Domain layer must NOT depend on frameworks

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-9588-7574
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ö† designing architecture around frameworks, not domain

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-9667-7575
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Slow: Python loop

**Preferred Alternative / Solution:**

Fast: Built-in

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-10424-7576
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Functions with Python objects (strings, dicts, etc.)

**Preferred Alternative / Solution:**

Numerical loops that NumPy can't vectorize

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-10492-7577
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Simple operations (NumPy is easier)

**Preferred Alternative / Solution:**

Need maximum performance

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-10590-7578
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Small, quick tasks (overhead > benefit)

**Preferred Alternative / Solution:**

CPU-bound tasks that benefit from parallelization

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-10783-7579
- **Chapter:** `GLOBAL`
- **Severity:** `high`

**Problem:**

use `eval()` or `exec()` with user input**

**Preferred Alternative / Solution:**

SAFE

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-11094-7580
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

should not be deployed

**Preferred Alternative / Solution:**

not be deployed

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-11096-7581
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

must not be committed

**Preferred Alternative / Solution:**

should be encrypted

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-11106-7582
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

pickle

**Preferred Alternative / Solution:**

13.6 Secure Filesystem & Path Handling

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-11125-7583
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

using user input in file paths directly

**Preferred Alternative / Solution:**

input in file paths directly

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-11238-7584
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

manual SQL queries

**Preferred Alternative / Solution:**

using "pickle" for sessions

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-11329-7585
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Error messages must not leak internal data

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-12099-7586
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ö† using too many mocks ‚Üí tests lie

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-12795-7587
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

python:latest

**Preferred Alternative / Solution:**

16.6.2 Multi-Stage Build Example

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-13173-7588
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

17.4 Concurrency Comparison (the famous table)

**Preferred Alternative / Solution:**

(3.14 FT)	Network IO, HTTP clients, websockets	CPU-bound work

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-13233-7589
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

need frequent communication

**Preferred Alternative / Solution:**

CPU-bound tasks (image processing, data analysis, ML preprocessing)

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-15012-7590
- **Chapter:** `GLOBAL`
- **Severity:** `high`

**Problem:**

cur.execute(f"SELECT * FROM users WHERE id={user_id}")  #

**Preferred Alternative / Solution:**

SQL injection

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-18312-7591
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

handle heavy workloads

**Preferred Alternative / Solution:**

not handle heavy workloads

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-18908-7592
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Do not write vague docstrings:**

**Preferred Alternative / Solution:**

# ‚ùå INCORRECT: Provides no useful information

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-18917-7593
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Do not restate the function name:**

**Preferred Alternative / Solution:**

# ‚ùå INCORRECT: Just repeats what the name already says

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-18926-7594
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Do not omit exceptions:**

**Preferred Alternative / Solution:**

# ‚ùå INCORRECT: Missing Raises section

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-18935-7595
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Do not include implementation details:**

**Preferred Alternative / Solution:**

# ‚ùå INCORRECT: Describes how instead of what

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-18996-7596
- **Chapter:** `GLOBAL`
- **Severity:** `high`

**Problem:**

API keys, tokens, or credentials

**Preferred Alternative / Solution:**

# ‚ùå INCORRECT: Exposes internal implementation details

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-21354-7597
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Python 2.7 only** (Python 2 EOL was 2020)

**Preferred Alternative / Solution:**

For new JVM + Python projects:

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-21361-7598
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Jython** for new projects

**Preferred Alternative / Solution:**

**Use GraalPy** (Python 3.11+, active development, better performance)

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-21397-7599
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Python 3 support is experimental** (not production-ready)

**Preferred Alternative / Solution:**

For .NET + Python interop:

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-21463-7600
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

Not ideal: Heavy C-extension dependencies (NumPy/SciPy support improving)

**Preferred Alternative / Solution:**

JVM-based applications needing Python

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-21535-7601
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Not recommended** for new projects (use asyncio instead)

**Preferred Alternative / Solution:**

Specific microthreading requirements

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-21556-7602
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Not production-ready** (missing features, compatibility issues)

**Preferred Alternative / Solution:**

**Use Cases:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-21563-7603
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Not for production applications

**Preferred Alternative / Solution:**

Educational projects

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-21913-7604
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

incorrect method names

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-23622-7605
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

A.1 Singleton Pattern

**Preferred Alternative / Solution:**

With Caution (Common Anti-Pattern)

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-23714-7606
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Anti-Pattern: Global State Mutation**

**Preferred Alternative / Solution:**

‚úÖ **Prefer Instead: Dependency Injection**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-23889-7607
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Anti-Pattern: Over-Complicated Factory**

**Preferred Alternative / Solution:**

‚úÖ **Prefer: Simple Functions or Dicts**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-24258-7608
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Anti-Pattern: Global Dependencies**

**Preferred Alternative / Solution:**

# BAD: Hard to test, tight coupling

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-24341-7609
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Overusing OOP patterns in Python

**Preferred Alternative / Solution:**

Functional & simpler solutions often work better.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-24345-7610
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

‚ùå Singleton misuse

**Preferred Alternative / Solution:**

‚ùå Factories where simple callables suffice

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-24350-7611
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Factories where simple callables suffice

**Preferred Alternative / Solution:**

of functions

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-24354-7612
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Excessive class hierarchies

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-26066-7613
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Common pitfall.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-26292-7614
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Callback Hell (Anti-pattern)

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-26989-7615
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Default Argument Gotcha (Mutable Defaults)

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-29539-7618
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Python pitfall:

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32086-7619
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Boolean trap patterns

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32104-7620
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

Each pitfall includes:

**Preferred Alternative / Solution:**

Incorrect example

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32121-7621
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

def append_to_list(value, lst=[]):

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32157-7622
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

funcs = [lambda: i for i in range(3)]

**Preferred Alternative / Solution:**

Incorrect

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32230-7623
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

running module-level code

**Preferred Alternative / Solution:**

Correct:

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32284-7624
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå **Incorrect:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32319-7625
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå **Incorrect:**

**Preferred Alternative / Solution:**

‚úÖ **Correct:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32481-7631
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect Understanding:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32651-7634
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect Assumption:**

**Preferred Alternative / Solution:**

Type hints are **documentation only** at runtime. They don't prevent incorrect types from being passed.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32764-7638
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**5. Using Protocol Incorrectly**

**Preferred Alternative / Solution:**

‚ùå **Incorrect:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32822-7641
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect Understanding:**

**Preferred Alternative / Solution:**

‚úÖ **Correct:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32842-7642
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå **Incorrect:**

**Preferred Alternative / Solution:**

‚úÖ **Correct Understanding:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32891-7643
- **Chapter:** `GLOBAL`
- **Severity:** `high`

**Problem:**

**CRITICAL SECURITY RISK:**

**Preferred Alternative / Solution:**

import pickle

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-32918-7644
- **Chapter:** `GLOBAL`
- **Severity:** `high`

**Problem:**

**CRITICAL SECURITY RISK:**

**Preferred Alternative / Solution:**

user_code = input("Enter expression: ")

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33025-7648
- **Chapter:** `GLOBAL`
- **Severity:** `high`

**Problem:**

**CRITICAL SECURITY RISK:**

**Preferred Alternative / Solution:**

import sqlite3

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33082-7650
- **Chapter:** `GLOBAL`
- **Severity:** `high`

**Problem:**

**CRITICAL SECURITY RISK:**

**Preferred Alternative / Solution:**

import subprocess

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33131-7652
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå **Incorrect:**

**Preferred Alternative / Solution:**

from fastapi import FastAPI

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33180-7653
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (O(n¬≤) complexity):**

**Preferred Alternative / Solution:**

‚úÖ **Correct (O(n) complexity):**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33206-7654
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (O(n) lookup):**

**Preferred Alternative / Solution:**

‚úÖ **Correct (O(1) lookup):**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33226-7655
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (slow):**

**Preferred Alternative / Solution:**

import pandas as pd

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33249-7656
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (slow):**

**Preferred Alternative / Solution:**

‚úÖ **Correct (fast):**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33278-7657
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (slow):**

**Preferred Alternative / Solution:**

‚úÖ **Correct:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33307-7658
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (stack overflow risk):**

**Preferred Alternative / Solution:**

‚úÖ **Correct:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33339-7659
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (memory overhead):**

**Preferred Alternative / Solution:**

‚úÖ **Correct (memory efficient):**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33372-7660
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (function call overhead):**

**Preferred Alternative / Solution:**

‚úÖ **Correct:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33423-7662
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (memory intensive):**

**Preferred Alternative / Solution:**

‚úÖ **Correct:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33470-7663
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**CRITICAL MISTAKE:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33499-7664
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå **Incorrect:**

**Preferred Alternative / Solution:**

def process_file(filename):

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33557-7666
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

‚ùå **Incorrect:**

**Preferred Alternative / Solution:**

try:

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33638-7669
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (slow):**

**Preferred Alternative / Solution:**

def find_user(users, user_id):

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33686-7671
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (old pattern):**

**Preferred Alternative / Solution:**

‚úÖ **Correct (Python 3.11+):**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33770-7673
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Common Confusion:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33815-7674
- **Chapter:** `GLOBAL`
- **Severity:** `medium`

**Problem:**

**Incorrect (undefined behavior):**

**Preferred Alternative / Solution:**

‚úÖ **Correct:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33847-7675
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Surprising Behavior:**

**Preferred Alternative / Solution:**

‚úÖ **Correct Understanding:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33869-7676
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Surprising Behavior:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33911-7677
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Common Misunderstanding:**

**Preferred Alternative / Solution:**

The `else` clause runs **only if the loop completes normally** (doesn't break). This is counterintuitive!

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33948-7678
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Surprising Behavior:**

**Preferred Alternative / Solution:**

Descriptors intercept attribute access. When you access `obj.attr`, Python calls `Descriptor.__get__()` instead of returning the descriptor object.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-33993-7679
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Surprising Behavior:**

**Preferred Alternative / Solution:**

C3 Linearization requires a consistent Method Resolution Order. `G(E, F)` where `E = (A, B)` and `F = (B, A)` creates a conflict.

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.

### antipattern-34055-7680
- **Chapter:** `GLOBAL`
- **Severity:** `low`

**Problem:**

**Surprising Behavior:**

**Preferred Alternative / Solution:**

‚úÖ **Correct:**

**Rule (Cursor guideline):**

- Avoid this pattern when writing python code unless explicitly justified.
- If existing code uses this pattern, prefer refactoring toward the recommended solution.


## Recommended Patterns (Prefer These)

### CODE-eda52017861d35a0
- **Chapter:** `GLOBAL`
- **Language:** `mermaid`
- **Pattern Type:** `generic`

**Pattern:**

flowchart TD

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9712ef51fff33532
- **Chapter:** `GLOBAL`
- **Language:** `mermaid`
- **Pattern Type:** `generic`

**Pattern:**

flowchart TD

**Example:**

```mermaid
flowchart TD
    Source[Source Code<br/>hello.py] --> Tokenization[1. TOKENIZATION<br/>Tokenizer converts characters ‚Üí tokens<br/>Example: def ‚Üí NAME, ( ‚Üí LPAR, x ‚Üí NAME]
    
    Tokenization --> Parsing[2. PARSING PEG Parser<br/>Tokens ‚Üí Abstract Syntax Tree AST<br/>Example: FunctionDef name='greet', args=[...]]
    
    Parsing --> ASTOpt[3. AST OPTIMIZATION<br/>Constant folding, dead code elimination<br/>Example: 2 + 3 ‚Üí 5 compile-time]
    
    ASTOpt --> Bytecode[4. BYTECODE COMPILATION<br
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-91ed4d565b18b667
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# hello.py

**Example:**

```python
# hello.py
def greet(name: str) -> str:
    """Return a personalized greeting."""
    return f"Hello, {name}!"

if __name__ == "__main__":
    print(greet("Python"))
    # Output: Hello, Python!
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-754a596e0560616f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def greet(name: str, title: str = "") -> str:

**Example:**

```python
def greet(name: str, title: str = "") -> str:
    """Return a personalized greeting with optional title."""
    if title:
        return f"Hello, {title} {name}!"
    return f"Hello, {name}!"

print(greet("Smith", "Dr."))
# Output: Hello, Dr. Smith!
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4a5c4b16227267cd
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Optional

**Example:**

```python
from typing import Optional

def format_greeting(name: str, age: Optional[int] = None) -> str:
    """Format a personalized greeting with type safety."""
    if age is None:
        return f"Hello, {name}!"
    return f"Hello, {name}! You are {age} years old."

print(format_greeting("Alice", 30))
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-550230aa2e681f2a
- **Chapter:** `GLOBAL`
- **Language:** `mermaid`
- **Pattern Type:** `generic`

**Pattern:**

flowchart TD

**Example:**

```mermaid
flowchart TD
    Source[Source Code<br/>hello.py] --> Tokenization[1. TOKENIZATION<br/>Tokenizer converts characters ‚Üí tokens<br/>Example: def ‚Üí NAME, ( ‚Üí LPAR, x ‚Üí NAME]
    
    Tokenization --> Parsing[2. PARSING PEG Parser<br/>Tokens ‚Üí Abstract Syntax Tree AST<br/>Example: FunctionDef name='greet', args=[...]]
    
    Parsing --> ASTOpt[3. AST OPTIMIZATION<br/>Constant folding, dead code elimination<br/>Example: 2 + 3 ‚Üí 5 compile-time]
    
    ASTOpt --> Bytecode[4. BYTECODE COMPILATION<br
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1900f5f48a1c0b01
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def add(a, b):

**Example:**

```python
def add(a, b):
    return a + b
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c83b37a64af62db5
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import tokenize

**Example:**

```python
import tokenize
from io import BytesIO

code = b"def add(a, b):\n    return a + b"
for token in tokenize.tokenize(BytesIO(code).readline):
    print(f"{token.type:15} {token.string:20} {token.start} ‚Üí {token.end}")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-02a08deab3837b06
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import ast

**Example:**

```python
import ast

tree = ast.parse("def add(a, b):\n    return a + b")
print(ast.dump(tree, indent=2))
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2a08da9b0c1c5a55
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import dis

**Example:**

```python
import dis

def add(a, b):
    return a + b

dis.dis(add)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-68214915f90c7c85
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import dis

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7c36cbd57ce65b33
- **Chapter:** `GLOBAL`
- **Language:** `mermaid`
- **Pattern Type:** `generic`

**Pattern:**

flowchart TD

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7779dd7d12d4d3a5
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

print("util imported")

**Example:**

```python
print("util imported")
x = 10
y = 20

def helper():
    return "helper function"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8a9775b971ae4e09
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import sys

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b487c03f9605890a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import util  # No "util imported" printed again

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-12f43506d5b8a99b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import util as util2

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2cf9c3bdacc1f584
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import sys

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-492308dfd96440cd
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import util  # "util imported" printed again

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8c98e32e3d12ad73
- **Chapter:** `GLOBAL`
- **Language:** `mermaid`
- **Pattern Type:** `generic`

**Pattern:**

flowchart TD

**Example:**

```mermaid
flowchart TD
    Start([Function Call: inner]) --> Local[1. LOCAL SCOPE L<br/>def inner:<br/>    x = local ‚Üê Check here first<br/>    print x<br/><br/>If found ‚Üí use it, STOP<br/>If not found ‚Üí continue to Enclosing]
    
    Local -->|not found| Enclosing[2. ENCLOSING SCOPE E<br/>def outer:<br/>    x = enclosing ‚Üê Check here<br/>    def inner:<br/>        print x  # uses enclosing<br/>    return inner<br/><br/>If found ‚Üí use it, STOP<br/>If not found ‚Üí continue to Global]
    
    Enclosing -->
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-70795e8aa0746814
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Calculator:

**Example:**

```python
class Calculator:
    def add(self, a: int, b: int) -> int:
        return a + b

calc = Calculator()
print(calc.add(2, 3))
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-ee659478adde3d33
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Point:

**Example:**

```python
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y

p = Point(1, 2)
# Each instance has __dict__: ~240 bytes overhead
# Can add arbitrary attributes: p.z = 3
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c614e3704064a597
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Point:

**Example:**

```python
class Point:
    __slots__ = ("x", "y")
    
    def __init__(self, x, y):
        self.x = x
        self.y = y

p = Point(1, 2)
# No __dict__: ~56 bytes per instance (4-5√ó memory savings)
# Cannot add arbitrary attributes: p.z = 3  # AttributeError
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e171e7d1d879fb97
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import sys

**Example:**

```python
import sys

class RegularPoint:
    def __init__(self, x, y):
        self.x = x
        self.y = y

class SlottedPoint:
    __slots__ = ("x", "y")
    
    def __init__(self, x, y):
        self.x = x
        self.y = y
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c409885df6969caa
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import sys

**Example:**

```python
import sys
from dataclasses import dataclass

@dataclass
class RegularUser:
    id: int
    name: str

@dataclass(slots=True)
class SlottedUser:
    id: int
    name: str

regular = RegularUser(1, "Alice")
slotted = SlottedUser(1, "Alice")

print(f"Regular: {sys.getsizeof(regular)} bytes")
print(f"Slotted: {sys.getsizeof(slotted)} bytes")
# Typical: Regular ~240 bytes, Slotted ~56 bytes
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0037706e42d146c7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class A:

**Example:**

```python
class A:
    def method(self):
        return "A"

class B:
    def method(self):
        return "B"

class C(A, B):
    pass

class D(B, A):
    pass

print(C.__mro__)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b20da35c8f9fb6f0
- **Chapter:** `GLOBAL`
- **Language:** `mermaid`
- **Pattern Type:** `generic`

**Pattern:**

flowchart TD

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b2f818da5b299577
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import sys

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-db8f58c405cb2d84
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

spec = importlib.util.find_spec("json")

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-34371615295490b2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import shutil

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-81e43569d9644f35
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import shutil

**Example:**

```python
import shutil
from pathlib import Path
from datetime import datetime

def backup_directory(source: Path, backup_dir: Path = Path("backups")):
    """Create timestamped backup of directory."""
    backup_dir.mkdir(exist_ok=True)
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    archive_name = f"{source.name}_{timestamp}"
    shutil.make_archive(
        str(backup_dir / archive_name),
        "zip",
        source.parent,
        source.name
    )
    print(f"Backup created: {archive_n
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-17807038484861c3
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import tempfile

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-bcdb4c0197fe1d58
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import os

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9101bc0b57910e92
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import tempfile

**Example:**

```python
import tempfile
import os
from pathlib import Path

def process_with_temp_file(data: str) -> str:
    """Process data in a secure temporary file."""
    fd, path = tempfile.mkstemp(suffix='.txt', text=True)
    try:
        with os.fdopen(fd, 'w') as f:
            f.write(data)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f5fa3cf61a09ef06
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from datetime import datetime, timedelta, date, time

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-ec21b5cea0a2bdd1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from datetime import datetime

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-42e572d2d97d64af
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from datetime import datetime

**Example:**

```python
from datetime import datetime
from zoneinfo import ZoneInfo

def schedule_event(local_time: str, timezone: str, event_name: str):
    """Schedule event in local timezone, convert to UTC."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-076b81f41c1b9c36
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

dt = datetime.fromisoformat("2025-01-27T14:30:45")

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-71dd58641bdb9b9e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from datetime import datetime, timedelta

**Example:**

```python
from datetime import datetime, timedelta

def date_range(start: str, end: str, step_days: int = 1):
    """Generate dates in range."""
    start_dt = datetime.strptime(start, "%Y-%m-%d")
    end_dt = datetime.strptime(end, "%Y-%m-%d")
    current = start_dt
    
    while current <= end_dt:
        yield current.date()
        current += timedelta(days=step_days)

# Generate all dates in January 2025
for date in date_range("2025-01-01", "2025-01-31"):
    print(date.strftime("%A, %B %d, %Y"))
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e3798cfca9576b9a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from collections import Counter

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6ab3cadd7ec4b51c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from collections import Counter

**Example:**

```python
from collections import Counter

def analyze_errors(log_file: str):
    """Count error types in log file."""
    errors = []
    with open(log_file) as f:
        for line in f:
            if "ERROR" in line:
                # Extract error type (simplified)
                error_type = line.split("ERROR")[1].split(":")[0].strip()
                errors.append(error_type)
    
    error_counts = Counter(errors)
    return error_counts.most_common(5)

# Usage
top_errors = analyze_errors("app.log
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-80912d9c7e9cd1b7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from collections import defaultdict

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-60658d77a2e3b10f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

groups = defaultdict(list)

**Example:**

```python
groups = defaultdict(list)
groups["a"].append(1)  # No KeyError, list created automatically
groups["a"].append(2)
print(groups)  # defaultdict(<class 'list'>, {'a': [1, 2]})
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-eeb0203c7643410e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

counts = defaultdict(int)

**Example:**

```python
counts = defaultdict(int)
counts["apple"] += 1  # No KeyError
counts["banana"] += 1
print(counts)  # defaultdict(<class 'int'>, {'apple': 1, 'banana': 1})
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1dfe274736b427d6
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def default_factory():

**Example:**

```python
def default_factory():
    return {"count": 0, "items": []}

dd_custom = defaultdict(default_factory)
dd_custom["group"]["count"] += 1
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b5ca4fdd8ac28851
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from collections import deque

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9898d88081460797
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

right = q.pop()        # Remove from right: 2

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5dcc69dcaffdf939
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from collections import deque

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5651fbc024b485de
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from collections import deque

**Example:**

```python
from collections import deque

def sliding_window(iterable, window_size: int):
    """Yield sliding windows of size window_size."""
    window = deque(maxlen=window_size)
    for item in iterable:
        window.append(item)
        if len(window) == window_size:
            yield tuple(window)

# Usage
data = [1, 2, 3, 4, 5, 6, 7]
for window in sliding_window(data, 3):
    print(window)
# (1, 2, 3)
# (2, 3, 4)
# (3, 4, 5)
# (4, 5, 6)
# (5, 6, 7)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f31403bce26e5ade
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from collections import OrderedDict

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6f2edde9c4891e28
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from collections import ChainMap

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-30bdba633889d3e2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

config = ChainMap(env_config, file_config, defaults)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-37c4d1b81d6a8de4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import os

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fbc17c1630bc5220
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from collections import ChainMap

**Example:**

```python
from collections import ChainMap
import json

def load_config():
    """Load configuration with precedence: env > file > defaults."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-44a53e0fa73798c2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

env_config = {}  # Would load from os.environ

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-36d4cc7ba361f824
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from collections import namedtuple

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-54d7e848d94c09cc
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from dataclasses import dataclass

**Example:**

```python
from dataclasses import dataclass

@dataclass
class Point:
    x: int
    y: int
    
    def distance(self, other: "Point") -> float:
        """Calculate distance to another point."""
        return ((self.x - other.x) ** 2 + (self.y - other.y) ** 2) ** 0.5

p1 = Point(1, 2)
p2 = Point(4, 6)
print(p1.distance(p2))  # 5.0
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d2b307added54b72
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from collections import namedtuple

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3997a2ea56555455
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@dataclass

**Example:**

```python
@dataclass
class PointDC:
    x: int
    y: int

p2 = PointDC(1, 2)
p2.x = 3  # OK: can modify
print(p2)  # PointDC(x=3, y=2)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1c13c105d73d6d13
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import re

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f399f96a50fffe94
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def replacer(match):

**Example:**

```python
def replacer(match):
    return match.group(0).upper()

text = "hello world"
new_text = re.sub(r"\w+", replacer, text)
print(new_text)  # "HELLO WORLD"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4ce4f665051d6657
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import re

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9d57420e935d3bb7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import re

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d1d207bc130c343f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import string

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-adc36ebe6416e65a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from string import Template

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-676c42e78866b2e9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import string

**Example:**

```python
import string
import secrets

def generate_password(length: int = 16) -> str:
    """Generate secure random password."""
    alphabet = string.ascii_letters + string.digits + string.punctuation
    return ''.join(secrets.choice(alphabet) for _ in range(length))

password = generate_password(20)
print(password)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0d10cd44fea70553
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import textwrap

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4bc2bae093f2faad
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import textwrap

**Example:**

```python
import textwrap

def format_docstring(text: str, width: int = 72) -> str:
    """Format docstring with proper indentation."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b26c569a971bc32d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import difflib

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fa39386e59e879d7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

diff = difflib.unified_diff(

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-706f4245bed11b03
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

diff = difflib.context_diff(

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d213bc3b1b8a8d32
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

diff = difflib.HtmlDiff()

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4ce3ce975bc983c0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import difflib

**Example:**

```python
import difflib

def show_diff(old_text: str, new_text: str):
    """Show unified diff between two texts."""
    diff = difflib.unified_diff(
        old_text.splitlines(keepends=True),
        new_text.splitlines(keepends=True),
        lineterm='',
        n=3  # Context lines
    )
    for line in diff:
        if line.startswith('+'):
            print(f"\033[92m{line}\033[0m", end='')  # Green for additions
        elif line.startswith('-'):
            print(f"\033[91m{line}\033[0m", end=''
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f937d893fbb663ff
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import json

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d999c9674bab5b74
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Person:

**Example:**

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

def person_encoder(obj):
    if isinstance(obj, Person):
        return {"name": obj.name, "age": obj.age}
    raise TypeError(f"Object of type {type(obj)} is not JSON serializable")

person = Person("Alice", 30)
json_str = json.dumps(person, default=person_encoder)
print(json_str)  # '{"name": "Alice", "age": 30}'
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0108fb63f84a9931
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def person_decoder(dct):

**Example:**

```python
def person_decoder(dct):
    if "name" in dct and "age" in dct:
        return Person(dct["name"], dct["age"])
    return dct

data = json.loads(json_str, object_hook=person_decoder)
print(type(data))  # <class '__main__.Person'>
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-dece35d9a9f652c8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import json

**Example:**

```python
import json

def safe_json_loads(text: str):
    """Safely parse JSON with error handling."""
    try:
        return json.loads(text)
    except json.JSONDecodeError as e:
        print(f"JSON decode error: {e}")
        print(f"Error at line {e.lineno}, column {e.colno}")
        return None

result = safe_json_loads('{"invalid": json}')
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4f213b85ec9c83c6
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import json

**Example:**

```python
import json
from pathlib import Path

class ConfigManager:
    def __init__(self, config_path: Path):
        self.config_path = config_path
        self.config = self.load()
    
    def load(self) -> dict:
        """Load configuration from JSON file."""
        if self.config_path.exists():
            with open(self.config_path) as f:
                return json.load(f)
        return {}
    
    def save(self):
        """Save configuration to JSON file."""
        with open(self.config_pat
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fe4ee2f18b9bf42e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import csv

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0ed9b0b763f42a5f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import csv

**Example:**

```python
import csv
from typing import List, Dict

def read_csv_safe(filename: str) -> List[Dict[str, str]]:
    """Read CSV with error handling and validation."""
    rows = []
    with open(filename, "r", encoding="utf-8", newline="") as f:
        reader = csv.DictReader(f)
        for i, row in enumerate(reader, start=2):  # Start at 2 (header is row 1)
            try:
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-70d0aef1ce4f2d20
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import configparser

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5f83296dcd019e51
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import configparser

**Example:**

```python
import configparser
from pathlib import Path

class AppConfig:
    def __init__(self, config_path: Path):
        self.cfg = configparser.ConfigParser()
        self.cfg.read(config_path)
        self.validate()
    
    def validate(self):
        """Validate required configuration."""
        required = {
            "database": ["host", "port", "name"],
            "app": ["debug", "log_level"]
        }
        for section, keys in required.items():
            if not self.cfg.has_section(se
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-13902abe082bbbc7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import xml.etree.ElementTree as ET

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4f902811d7af8349
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

xml_str = "<root><item>Value</item></root>"

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fee7224d3333a3c8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import xml.etree.ElementTree as ET

**Example:**

```python
import xml.etree.ElementTree as ET

def transform_xml(input_file: str, output_file: str):
    """Transform XML structure."""
    tree = ET.parse(input_file)
    root = tree.getroot()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-89ba4a4ca3058708
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import pickle

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-af852ce8c592e0b0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import json

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5da63fcd438ee5a3
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import msgpack  # Third-party

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2544b5aedae81c3e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import pickle

**Example:**

```python
import pickle
import hashlib
from pathlib import Path

class SafePickleCache:
    """Safe pickle-based cache with validation."""
    
    def __init__(self, cache_dir: Path):
        self.cache_dir = cache_dir
        self.cache_dir.mkdir(exist_ok=True)
    
    def _get_cache_path(self, key: str) -> Path:
        """Get cache file path for key."""
        key_hash = hashlib.md5(key.encode()).hexdigest()
        return self.cache_dir / f"{key_hash}.pkl"
    
    def get(self, key: str):
        
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-94a1c61a846707e8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import subprocess

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c502fc8f9395b7dc
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import subprocess

**Example:**

```python
import subprocess
from typing import List, Optional

def run_command_safe(
    command: List[str],
    timeout: Optional[float] = None,
    cwd: Optional[str] = None
) -> tuple[int, str, str]:
    """Safely run command and return (returncode, stdout, stderr)."""
    try:
        result = subprocess.run(
            command,
            capture_output=True,
            text=True,
            timeout=timeout,
            cwd=cwd,
            check=False  # Don't raise on error
        )
        re
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e1dcd3cde43ab56f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import sys

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1227b05a3b31a125
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import sys

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1959cf683983ebed
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import sys

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8ea1b5eb5919f7ad
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from contextlib import redirect_stdout

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-95a5f5faa1e0cc59
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import sys

**Example:**

```python
import sys

def parse_args():
    """Simple argument parser."""
    if len(sys.argv) < 2:
        print("Usage: script.py <command> [args...]")
        sys.exit(1)
    
    command = sys.argv[1]
    args = sys.argv[2:]
    
    if command == "hello":
        name = args[0] if args else "World"
        print(f"Hello, {name}!")
    elif command == "version":
        print(f"Python {sys.version}")
    else:
        print(f"Unknown command: {command}")
        sys.exit(1)

parse_args()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1395dead2bcd2c7e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import os

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d42182b1ff7c5f68
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import os.path

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f1d42f4023dadb1c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import os

**Example:**

```python
import os
from pathlib import Path

def find_files(directory: str, extension: str) -> list[str]:
    """Find all files with given extension."""
    files = []
    for root, dirs, filenames in os.walk(directory):
        for filename in filenames:
            if filename.endswith(extension):
                full_path = os.path.join(root, filename)
                files.append(full_path)
    return files

# Usage
py_files = find_files(".", ".py")
for file in py_files:
    print(file)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8b6264151ed2f439
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import signal

**Example:**

```python
import signal
import sys

def signal_handler(signum, frame):
    """Handle interrupt signal."""
    print("\nInterrupted! Cleaning up...")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fcf11708eef5837d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import signal

**Example:**

```python
import signal

class TimeoutError(Exception):
    pass

def timeout_handler(signum, frame):
    raise TimeoutError("Operation timed out")

def with_timeout(seconds: int):
    """Decorator for function timeout."""
    def decorator(func):
        def wrapper(*args, **kwargs):
            signal.signal(signal.SIGALRM, timeout_handler)
            signal.alarm(seconds)
            try:
                result = func(*args, **kwargs)
            finally:
                signal.alarm(0)  # Cancel alar
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-53f76e2fcb20ca01
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import signal

**Example:**

```python
import signal
import sys
import time

class GracefulShutdown:
    def __init__(self):
        self.shutdown_requested = False
        signal.signal(signal.SIGINT, self._handler)
        signal.signal(signal.SIGTERM, self._handler)
    
    def _handler(self, signum, frame):
        print(f"\nReceived signal {signum}, shutting down gracefully...")
        self.shutdown_requested = True
    
    def should_continue(self):
        return not self.shutdown_requested

shutdown = GracefulShutdown()

#
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c1dad42122e3950a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from urllib.request import urlopen, Request

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-050864572f962067
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from urllib.parse import urlparse, urljoin, quote, unquote

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d212890397a47d24
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from urllib.request import Request, urlopen

**Example:**

```python
from urllib.request import Request, urlopen
from urllib.error import URLError, HTTPError
from urllib.parse import urlencode

def http_get(url: str, headers: dict = None) -> tuple[int, bytes]:
    """Simple GET request with error handling."""
    try:
        req = Request(url)
        if headers:
            for key, value in headers.items():
                req.add_header(key, value)
        
        with urlopen(req, timeout=10) as response:
            return response.status, response.read()

...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-844240e5aed7d1e1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import socket

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1aeacef588b33f8b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-802fe13d6be054ea
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import socket

**Example:**

```python
import socket
import threading

def handle_client(client, addr):
    """Handle client connection."""
    with client:
        print(f"Client connected: {addr}")
        while True:
            data = client.recv(1024)
            if not data:
                break
            client.sendall(b"Echo: " + data)
    print(f"Client disconnected: {addr}")

def start_server(host="localhost", port=8080):
    """Start echo server."""
    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    serv
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-ecbf3f111c113a20
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import ssl

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fe456a5b2383b3d5
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import ssl

**Example:**

```python
import ssl
import socket
from urllib.request import urlopen

def secure_get(url: str) -> bytes:
    """Secure HTTPS GET with proper certificate validation."""
    ctx = ssl.create_default_context()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1ef2ba0a091be649
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from urllib.parse import urlparse

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3b3f25e1334f6572
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import zipfile

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7aae2b33db087014
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import zipfile

**Example:**

```python
import zipfile
from pathlib import Path
from datetime import datetime

def create_backup(source_dir: Path, backup_path: Path):
    """Create timestamped ZIP backup of directory."""
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    backup_file = backup_path / f"backup_{timestamp}.zip"
    
    with zipfile.ZipFile(backup_file, "w", zipfile.ZIP_DEFLATED) as z:
        for file in source_dir.rglob("*"):
            if file.is_file():
                arcname = file.relative_to(source_dir)
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d8fb7a8302858964
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import tarfile

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c4f34e22bdab898e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import tarfile

**Example:**

```python
import tarfile
from pathlib import Path

def create_tar_filtered(source_dir: Path, output: Path, exclude_patterns: list[str]):
    """Create TAR excluding certain patterns."""
    def filter_func(tarinfo):
        """Filter out excluded patterns."""
        for pattern in exclude_patterns:
            if pattern in tarinfo.name:
                return None
        return tarinfo
    
    with tarfile.open(output, "w:gz") as t:
        t.add(source_dir, arcname=source_dir.name, filter=filter_func
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-48b10cb73a6df9a3
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import gzip

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a78d980549e83790
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import gzip

**Example:**

```python
import gzip
from pathlib import Path

def compress_logs(log_dir: Path, keep_original: bool = False):
    """Compress all .log files in directory."""
    for log_file in log_dir.glob("*.log"):
        gz_file = log_file.with_suffix(".log.gz")
        
        with open(log_file, "rb") as f_in:
            with gzip.open(gz_file, "wb") as f_out:
                f_out.writelines(f_in)
        
        if not keep_original:
            log_file.unlink()
        
        print(f"Compressed: {log_file
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3c1b3ff589d1973e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import logging

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b3f00a2e2a0e06b9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import logging

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f1d7976ac47903b2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import logging

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8fcc23a1c47df6ca
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class ContextFilter(logging.Filter):

**Example:**

```python
class ContextFilter(logging.Filter):
    def filter(self, record):
        record.request_id = getattr(record, "request_id", "unknown")
        return True

logger.addFilter(ContextFilter())
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3f287f7e11e824fe
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import logging

**Example:**

```python
import logging
from logging.handlers import RotatingFileHandler
from pathlib import Path

def setup_logging(log_dir: Path, app_name: str = "app"):
    """Setup production-ready logging."""
    log_dir.mkdir(exist_ok=True)
    log_file = log_dir / f"{app_name}.log"
    
    # Configure root logger
    logging.basicConfig(
        level=logging.INFO,
        format='%(asctime)s - %(name)s - %(levelname)s - [%(request_id)s] - %(message)s',
        handlers=[
            logging.StreamHandler(),
   
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-92ee2221444271d1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from pprint import pprint

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4c8a0db55ba4a518
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from pprint import pprint, pformat

**Example:**

```python
from pprint import pprint, pformat

def debug_print(data, label="Data"):
    """Pretty print with label."""
    print(f"\n{label}:")
    print("=" * 50)
    pprint(data, width=80, indent=2)
    print("=" * 50)

# Usage
debug_print({"key": "value"}, "Configuration")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-46609720c08fa32b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import traceback

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d1937268df41b2fc
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import traceback

**Example:**

```python
import traceback
import sys

def format_exception(e: Exception) -> str:
    """Format exception with full context."""
    exc_type, exc_value, exc_tb = sys.exc_info()
    tb_lines = traceback.format_exception(exc_type, exc_value, exc_tb)
    return ''.join(tb_lines)

try:
    risky_operation()
except Exception as e:
    error_msg = format_exception(e)
    logger.error(f"Operation failed:\n{error_msg}")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d9cd6aabf7c9a146
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import traceback

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3c8943721f9cc3b4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import inspect

**Example:**

```python
import inspect

def example(a: int, b: str = "default", *args, **kwargs) -> str:
    """Example function."""
    pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a7cc50b6a90ccdd7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

print(sig.return_annotation)  # <class 'str'>

**Example:**

```python
print(sig.return_annotation)  # <class 'str'>
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a3b1e429a014615d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import inspect

**Example:**

```python
import inspect

class MyClass:
    def method(self):
        pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a891f89debdb8647
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import inspect

**Example:**

```python
import inspect

def debug_function():
    # Get current frame
    frame = inspect.currentframe()
    print(f"Function: {frame.f_code.co_name}")
    print(f"File: {frame.f_code.co_filename}")
    print(f"Line: {frame.f_lineno}")
    print(f"Locals: {frame.f_locals}")

debug_function()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-95362769f8a7fa8d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import inspect

**Example:**

```python
import inspect

def inspect_function(func):
    """Inspect function and print details."""
    sig = inspect.signature(func)
    doc = inspect.getdoc(func)
    source = inspect.getsource(func)
    
    print(f"Function: {func.__name__}")
    print(f"Signature: {sig}")
    print(f"Docstring: {doc}")
    print(f"Source:\n{source}")

def example(a: int, b: str) -> str:
    """Example function."""
    return f"{a}: {b}"

inspect_function(example)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-147133c0943d1d19
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå WRONG: Cache grows unbounded

**Example:**

```python
# ‚ùå WRONG: Cache grows unbounded
class Service:
    @lru_cache(maxsize=256)
    def process(self, data: str) -> dict:
        # 'self' is part of cache key ‚Üí unique per instance
        return expensive_computation(data)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7221c048e01b1b86
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Module-level function with hashable args

**Example:**

```python
# ‚úÖ CORRECT: Module-level function with hashable args
@lru_cache(maxsize=256)
def _process_impl(data: str) -> dict:
    return expensive_computation(data)

class Service:
    def process(self, data: str) -> dict:
        return _process_impl(data)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-644268ae9cac4847
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import tracemalloc

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-717de956268d64e3
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import tracemalloc

**Example:**

```python
import tracemalloc
import sys

def process_data():
    """Simulate memory-intensive operation."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-233461d2e62a0177
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import tracemalloc

**Example:**

```python
import tracemalloc

def create_objects():
    """Function that might leak memory."""
    objects = []
    for i in range(1000):
        objects.append([0] * 10000)
    return objects
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3b2a42b606d1ebdb
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import tracemalloc

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f6833de90d1ffb80
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from contextlib import contextmanager

**Example:**

```python
from contextlib import contextmanager
import tracemalloc

@contextmanager
def trace_memory():
    """Context manager for memory tracing."""
    tracemalloc.start()
    snapshot1 = tracemalloc.take_snapshot()
    try:
        yield
    finally:
        snapshot2 = tracemalloc.take_snapshot()
        top_stats = snapshot2.compare_to(snapshot1, 'lineno')
        
        print("Memory allocations:")
        for stat in top_stats[:5]:
            print(stat)
        
        tracemalloc.stop()

# Us
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7cf117fddf51f561
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import tracemalloc

**Example:**

```python
import tracemalloc

def my_function():
    # Your code here
    data = [i**2 for i in range(100_000)]
    return sum(data)

tracemalloc.start()
result = my_function()
snapshot = tracemalloc.take_snapshot()
top_stats = snapshot.statistics('lineno')

print("Memory usage by line:")
for stat in top_stats[:5]:
    print(f"{stat.filename}:{stat.lineno}: {stat.size / 1024:.2f} KB")

tracemalloc.stop()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-200eed179dbdc006
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import time

**Example:**

```python
import time
import numpy as np
from typing import Callable

def benchmark(func: Callable, *args, iterations: int = 5) -> float:
    """Run function multiple times and return average time."""
    times = []
    for _ in range(iterations):
        start = time.perf_counter()
        func(*args)
        times.append(time.perf_counter() - start)
    return sum(times) / len(times)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d5f82f6206029447
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def python_loop(n: int):

**Example:**

```python
def python_loop(n: int):
    return [i * 2 for i in range(n)]

def numpy_vectorized(n: int):
    return (np.arange(n) * 2).tolist()

def numpy_inplace(n: int):
    arr = np.arange(n, dtype=np.float64)
    arr *= 2
    return arr
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-80b6fea85fdd676e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import time

**Example:**

```python
import time
import numpy as np

def python_loop(n):
    return [i * 2 for i in range(n)]

def numpy_vectorized(n):
    return (np.arange(n) * 2).tolist()

n = 1_000_000
start = time.perf_counter()
python_loop(n)
py_time = time.perf_counter() - start

start = time.perf_counter()
numpy_vectorized(n)
np_time = time.perf_counter() - start

print(f"Python: {py_time:.4f}s, NumPy: {np_time:.4f}s")
print(f"Speedup: {py_time / np_time:.1f}√ó")
# Output: Python: 0.1234s, NumPy: 0.0045s
# Output: Speedup: 2
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0d0e845620009cbf
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import numpy as np

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-76952b0fb48301cf
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from numba import njit

**Example:**

```python
from numba import njit
import numpy as np

@njit
def fast_sum(arr):
    """JIT-compiled function."""
    total = 0.0
    for i in range(len(arr)):
        total += arr[i]
    return total
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-145434583e7a9421
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import numpy as np

**Example:**

```python
import numpy as np
import time
from numba import njit

def python_sum(arr):
    """Pure Python sum."""
    total = 0.0
    for i in range(len(arr)):
        total += arr[i]
    return total

@njit
def numba_sum(arr):
    """Numba JIT-compiled sum."""
    total = 0.0
    for i in range(len(arr)):
        total += arr[i]
    return total

def numpy_sum(arr):
    """NumPy vectorized sum."""
    return np.sum(arr)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5a9340eb5a993900
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from numba import njit

**Example:**

```python
from numba import njit
import numpy as np

@njit
def custom_filter(arr, threshold):
    """Custom filtering algorithm (hard to vectorize)."""
    result = []
    for i in range(len(arr)):
        if arr[i] > threshold:
            result.append(arr[i] * 2)
        elif arr[i] < -threshold:
            result.append(arr[i] * -2)
    return np.array(result)

# Much faster than pure Python version
arr = np.random.randn(1_000_000)
filtered = custom_filter(arr, 0.5)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-93c7bf9368d1de0e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def python_sum(arr):

**Example:**

```python
def python_sum(arr):
    total = 0.0
    for x in arr:
        total += x
    return total
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7d7d3a6d35574577
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Pool

**Example:**

```python
from multiprocessing import Pool
from concurrent.futures import ProcessPoolExecutor
import time

def cpu_task(n: int) -> int:
    """CPU-intensive task."""
    return sum(i * i for i in range(n))
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e0a3963ead3302cb
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@pytest.fixture(scope="session")

**Example:**

```python
@pytest.fixture(scope="session")
def db():
    """Database connection shared across all tests."""
    conn = create_connection()
    yield conn
    conn.close()

@pytest.fixture(scope="function")
def transaction(db):
    """Fresh transaction for each test."""
    trans = db.begin()
    yield trans
    trans.rollback()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-04a4569da4acf857
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@pytest.fixture(params=["sqlite", "postgresql", "mysql"])

**Example:**

```python
@pytest.fixture(params=["sqlite", "postgresql", "mysql"])
def database(request):
    return create_database(request.param)

def test_query(database):
    assert database.query("SELECT 1") == 1
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5ead2ce116c1ac98
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@pytest.fixture

**Example:**

```python
@pytest.fixture
def config():
    return {"api_url": "https://api.example.com"}

@pytest.fixture
def client(config):  # Depends on config
    return APIClient(config["api_url"])

def test_api_call(client):
    assert client.get("/status") == 200
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-26a99ed1669b5959
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@pytest.fixture(autouse=True)

**Example:**

```python
@pytest.fixture(autouse=True)
def reset_state():
    """Automatically runs before every test."""
    clear_cache()
    yield
    cleanup()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9cd345e4ee5f02df
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@pytest.mark.slow

**Example:**

```python
@pytest.mark.slow
def test_expensive_operation():
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9e8b28456ec157fc
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@pytest.mark.parametrize("input,expected", [

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6ff532e65f32ad37
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def test_division_by_zero():

**Example:**

```python
def test_division_by_zero():
    with pytest.raises(ZeroDivisionError) as exc_info:
        divide(10, 0)
    
    assert str(exc_info.value) == "division by zero"

# Match exception message
with pytest.raises(ValueError, match="invalid input"):
    process_data(None)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e1cb45cdac094f4a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from unittest.mock import patch

**Example:**

```python
from unittest.mock import patch

@patch('module.expensive_function')
def test_with_mock(mock_func):
    mock_func.return_value = "mocked"
    result = my_function()
    assert result == "mocked"
    mock_func.assert_called_once()

# Context manager
def test_with_context():
    with patch('module.api_call') as mock_api:
        mock_api.return_value = {"status": "ok"}
        result = process_api()
        assert result["status"] == "ok"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1dda06c8062a81c1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import pytest

**Example:**

```python
import pytest

def test_with_pytest_mock(mocker):
    mock_func = mocker.patch('module.expensive_function')
    mock_func.return_value = 42
    
    result = my_function()
    assert result == 42
    mock_func.assert_called_once()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d36a5995b69a1347
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from unittest.mock import AsyncMock

**Example:**

```python
from unittest.mock import AsyncMock

@pytest.mark.asyncio
async def test_async_function():
    mock_client = AsyncMock()
    mock_client.fetch.return_value = {"data": "test"}
    
    result = await my_async_function(mock_client)
    assert result == {"data": "test"}
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-afd580fc08c5ce86
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from hypothesis import given, strategies as st

**Example:**

```python
from hypothesis import given, strategies as st

@given(st.integers(), st.integers())
def test_add_commutative(a, b):
    """Addition is commutative."""
    assert add(a, b) == add(b, a)

@given(st.lists(st.integers()))
def test_reverse_twice_is_identity(lst):
    """Reversing twice returns original."""
    assert reverse(reverse(lst)) == lst
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-adaafd4ea08f8068
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from hypothesis import given, strategies as st

**Example:**

```python
from hypothesis import given, strategies as st

@given(st.emails())
def test_email_validation(email):
    assert is_valid_email(email)

# Composite strategies
@given(st.lists(st.integers(min_value=1, max_value=100), min_size=1))
def test_sum_positive(numbers):
    assert sum(numbers) > 0
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fffee474ff79a76c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@pytest.fixture(scope="session")

**Example:**

```python
@pytest.fixture(scope="session")
def test_db():
    """Create test database."""
    db = create_test_database()
    yield db
    db.drop_all()

@pytest.fixture
def db_session(test_db):
    """Fresh session for each test."""
    session = test_db.session()
    yield session
    session.rollback()
    session.close()

def test_user_creation(db_session):
    user = User(name="Test")
    db_session.add(user)
    db_session.commit()
    assert user.id is not None
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0688eabf14020028
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from fastapi.testclient import TestClient

**Example:**

```python
from fastapi.testclient import TestClient

@pytest.fixture
def client():
    return TestClient(app)

def test_get_users(client):
    response = client.get("/users")
    assert response.status_code == 200
    assert len(response.json()) > 0
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-bdeab00c174ca0a6
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# tests/conftest.py

**Example:**

```python
# tests/conftest.py
import pytest

@pytest.fixture(scope="session")
def database():
    return create_test_db()

@pytest.fixture
def sample_user():
    return User(name="Test", email="test@example.com")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-33bb061b9fb9811e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import pdb

**Example:**

```python
import pdb

def divide(a, b):
    pdb.set_trace()  # Breakpoint
    return a / b

result = divide(10, 2)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1d9e2b348e2436cb
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process_data(data):

**Example:**

```python
def process_data(data):
    breakpoint()  # Modern way (calls pdb.set_trace())
    return data.upper()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-10b234972da97bd9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import ipdb

**Example:**

```python
import ipdb

def complex_function():
    ipdb.set_trace()  # Enhanced breakpoint
    # ... your code ...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c2719cd57fe69a8f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import debugpy

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3b05385dd00f6669
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def main():

**Example:**

```python
def main():
    result = process_data()
    return result
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a04eea428cd76383
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import logging

**Example:**

```python
import logging
import json
from datetime import datetime

class StructuredLogger:
    def __init__(self, name: str):
        self.logger = logging.getLogger(name)
        handler = logging.StreamHandler()
        formatter = logging.Formatter(
            '%(asctime)s %(name)s %(levelname)s %(message)s'
        )
        handler.setFormatter(formatter)
        self.logger.addHandler(handler)
        self.logger.setLevel(logging.DEBUG)
    
    def debug(self, event: str, **kwargs):
        self.
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a69b2ec67ca1a1b4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import structlog

**Example:**

```python
import structlog

logger = structlog.get_logger()

def process_order(order_id: str):
    logger.info("order.processing", order_id=order_id)
    try:
        result = validate_order(order_id)
        logger.info("order.validated", order_id=order_id, valid=result)
    except Exception as e:
        logger.error("order.failed", order_id=order_id, error=str(e))
        raise
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4a65c224d42e6064
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import uuid

**Example:**

```python
import uuid
import logging

class CorrelationFilter(logging.Filter):
    def filter(self, record):
        record.correlation_id = getattr(
            record, 'correlation_id', str(uuid.uuid4())
        )
        return True

logger = logging.getLogger()
logger.addFilter(CorrelationFilter())
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3d94bcd335bd2a48
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import cProfile

**Example:**

```python
import cProfile
import pstats

def profile_function():
    profiler = cProfile.Profile()
    profiler.enable()
    
    # Your code
    result = slow_function()
    
    profiler.disable()
    stats = pstats.Stats(profiler)
    stats.sort_stats('cumulative')
    stats.print_stats(20)  # Top 20 functions
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5b9d3a82ac7ff447
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# Install: pip install line_profiler

**Example:**

```python
# Install: pip install line_profiler

@profile  # Decorator for line_profiler
def slow_function():
    total = 0
    for i in range(1000000):
        total += i ** 2
    return total
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fb6aab2e4e8f643f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

# Install: pip install memory-profiler

**Example:**

```python
# Install: pip install memory-profiler

@profile
def memory_intensive():
    data = [i for i in range(1000000)]
    return sum(data)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9ae3711cd7f0ee97
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def debug_print(*args, **kwargs):

**Example:**

```python
def debug_print(*args, **kwargs):
    """Print with context."""
    import inspect
    frame = inspect.currentframe().f_back
    print(f"[{frame.filename}:{frame.lineno}]", *args, **kwargs)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3fd01f178a5d44ff
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process_data(data):

**Example:**

```python
def process_data(data):
    assert data is not None, "Data cannot be None"
    assert len(data) > 0, "Data cannot be empty"
    # ... processing ...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-81590a63d1283a51
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from multiprocessing import Process

**Example:**

```python
from multiprocessing import Process
import os

def compute(name: str, data: list[int]):
    """CPU-intensive task."""
    print(f"Process {name} (PID: {os.getpid()}) processing {len(data)} items")
    result = sum(x * x for x in data)
    print(f"Process {name} result: {result}")
    return result

if __name__ == "__main__":
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-da5b176965d05c13
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from multiprocessing import Process, Queue

**Example:**

```python
from multiprocessing import Process, Queue
import time

def worker(name: str, queue: Queue):
    """Worker process that sends results back."""
    for i in range(5):
        result = f"{name}: Task {i} completed"
        queue.put(result)
        time.sleep(0.1)
    queue.put(None)  # Sentinel value

if __name__ == "__main__":
    queue = Queue()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c834ae43165f5015
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from multiprocessing import Process

**Example:**

```python
from multiprocessing import Process
from pathlib import Path

def process_file(file_path: Path):
    """Process a single file."""
    print(f"Processing {file_path.name}")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a8f9c7743cef352d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from concurrent.futures import ProcessPoolExecutor, as_completed

**Example:**

```python
from concurrent.futures import ProcessPoolExecutor, as_completed
import time

def expensive_computation(n: int) -> int:
    """CPU-intensive computation."""
    result = sum(i * i for i in range(n))
    return result

if __name__ == "__main__":
    data = [1000000, 2000000, 3000000, 4000000, 5000000]
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f533ed1571720715
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

def risky_computation(n: int) -> int:

**Example:**

```python
def risky_computation(n: int) -> int:
    """May raise exception."""
    if n < 0:
        raise ValueError("Negative number")
    return n * n

with ProcessPoolExecutor() as executor:
    futures = [executor.submit(risky_computation, n) for n in [-1, 2, 3]]
    
    for future in as_completed(futures):
        try:
            result = future.result()
            print(f"Success: {result}")
        except ValueError as e:
            print(f"Error: {e}")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-69cb46775769f8ab
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import time

**Example:**

```python
import time
from concurrent.futures import ProcessPoolExecutor, ThreadPoolExecutor

def cpu_task(n: int) -> int:
    """CPU-bound task."""
    return sum(i * i for i in range(n))

data = list(range(1000, 5000, 100))
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-cd10391c12934d3c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from concurrent.futures import ProcessPoolExecutor

**Example:**

```python
from concurrent.futures import ProcessPoolExecutor
from pathlib import Path
from PIL import Image

def process_image(image_path: Path) -> Path:
    """Process single image (CPU-intensive)."""
    img = Image.open(image_path)
    # Resize and apply filters
    img = img.resize((800, 600))
    img = img.filter(Image.Filter.SHARPEN)
    output_path = image_path.parent / f"processed_{image_path.name}"
    img.save(output_path)
    return output_path

if __name__ == "__main__":
    images = list(Path
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-08e79186fdb49d35
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Process, Value, Array

**Example:**

```python
from multiprocessing import Process, Value, Array
import time

def increment_counter(counter: Value, lock):
    """Increment shared counter."""
    for _ in range(100000):
        with lock:
            counter.value += 1

if __name__ == "__main__":
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c185d6f5c45677ab
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from multiprocessing import Process, Array

**Example:**

```python
from multiprocessing import Process, Array

def square_array(arr: Array, start: int, end: int):
    """Square elements in range."""
    for i in range(start, end):
        arr[i] = arr[i] * arr[i]

if __name__ == "__main__":
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fb4ed4ebafb77a20
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå WRONG: Race condition

**Example:**

```python
# ‚ùå WRONG: Race condition
counter = Value('i', 0)
def bad_increment():
    counter.value += 1  # Not atomic!

# ‚úÖ CORRECT: Use lock
from multiprocessing import Lock

lock = Lock()
def good_increment():
    with lock:
        counter.value += 1
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2a5b4cc150393d9f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Process, Array, Lock

**Example:**

```python
from multiprocessing import Process, Array, Lock
import math

def compute_row(arr: Array, row: int, cols: int, lock: Lock):
    """Compute values for one row."""
    for col in range(cols):
        index = row * cols + col
        with lock:
            arr[index] = math.sin(row) * math.cos(col)

if __name__ == "__main__":
    rows, cols = 1000, 1000
    shared_matrix = Array('d', [0.0] * (rows * cols))
    lock = Lock()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-764acda5633eda47
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Manager, Process

**Example:**

```python
from multiprocessing import Manager, Process

def worker(shared_dict: dict, shared_list: list):
    """Worker that modifies shared objects."""
    shared_dict['count'] = shared_dict.get('count', 0) + 1
    shared_list.append(os.getpid())

if __name__ == "__main__":
    manager = Manager()
    shared_dict = manager.dict()
    shared_list = manager.list()
    
    # Start workers
    processes = [
        Process(target=worker, args=(shared_dict, shared_list))
        for _ in range(5)
    ]
    

...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1cbfe2dc34a40c0a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Manager, Process

**Example:**

```python
from multiprocessing import Manager, Process

def update_stats(stats):
    """Update statistics."""
    stats.processed += 1
    stats.total_time += 0.5

if __name__ == "__main__":
    manager = Manager()
    stats = manager.Namespace()
    stats.processed = 0
    stats.total_time = 0.0
    
    processes = [
        Process(target=update_stats, args=(stats,))
        for _ in range(10)
    ]
    
    for p in processes:
        p.start()
    for p in processes:
        p.join()
    
    print(f
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7656c005824ca677
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Manager, Process

**Example:**

```python
from multiprocessing import Manager, Process
import time

def worker(task_queue: 'Queue', result_dict: dict, worker_id: int):
    """Worker process."""
    while True:
        task = task_queue.get()
        if task is None:  # Sentinel
            break
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f7c2aec4b115b7d4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

large_data = [list(range(10000)) for _ in range(1000)]

**Example:**

```python
large_data = [list(range(10000)) for _ in range(1000)]

def process(data):
    return sum(sum(row) for row in data)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-925d8cd51f051972
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process_by_index(start_idx, end_idx):

**Example:**

```python
def process_by_index(start_idx, end_idx):
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-664bd0dc6fb851ea
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

# ‚ùå BAD: Many small tasks

**Example:**

```python
# ‚ùå BAD: Many small tasks
def tiny_task(x):
    return x * 2

# Process startup overhead > task time
with ProcessPoolExecutor() as executor:
    results = list(executor.map(tiny_task, range(100)))  # Slow!

# ‚úÖ BETTER: Batch small tasks
def batch_task(batch):
    return [x * 2 for x in batch]

batches = [list(range(i, i+100)) for i in range(0, 1000, 100)]
with ProcessPoolExecutor() as executor:
    results = list(executor.map(batch_task, batches))
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c5306ac69285e079
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå BAD: Lambdas can't be pickled

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-eeb11e9c44007fe5
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå BAD: Trying to share unpicklable objects

**Example:**

```python
# ‚ùå BAD: Trying to share unpicklable objects
class Unpicklable:
    def __init__(self):
        self.lock = threading.Lock()  # Can't pickle locks!

# ‚úÖ CORRECT: Use Manager or shared memory
manager = Manager()
shared_obj = manager.Namespace()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c429b89ef669d39d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import multiprocessing

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7b5259769a627936
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from multiprocessing import Process, Queue

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0d4b84bc6234d560
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

if __name__ == "__main__":

**Example:**

```python
if __name__ == "__main__":
    multiprocessing.set_start_method('spawn')  # Portable
    
    def worker(q: Queue):
        """Worker that processes tasks."""
        while True:
            task = q.get()
            if task is None:
                break
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-01d3d6fe2c815fdc
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from multiprocessing import Process, Pipe

**Example:**

```python
from multiprocessing import Process, Pipe

def worker(conn):
    """Worker with bidirectional communication."""
    while True:
        msg = conn.recv()
        if msg == "STOP":
            break
        result = process(msg)
        conn.send(result)
    conn.close()

if __name__ == "__main__":
    parent_conn, child_conn = Pipe()
    p = Process(target=worker, args=(child_conn,))
    p.start()
    
    # Send and receive
    parent_conn.send("task1")
    result = parent_conn.recv()
    print
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a8c0caa87c799705
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from multiprocessing import Process, Queue

**Example:**

```python
from multiprocessing import Process, Queue
import time

def producer(queue: Queue):
    """Produce items."""
    for i in range(10):
        queue.put(f"Item {i}")
        time.sleep(0.1)
    queue.put(None)  # Sentinel

def consumer(queue: Queue):
    """Consume items."""
    while True:
        item = queue.get()
        if item is None:
            break
        print(f"Consumed: {item}")

if __name__ == "__main__":
    queue = Queue()
    
    p1 = Process(target=producer, args=(queue,))
   
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-371366e9cd0ad3eb
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from multiprocessing import Process, Queue

**Example:**

```python
from multiprocessing import Process, Queue
from typing import List

def stage1(input_queue: Queue, output_queue: Queue):
    """First stage: Load and filter."""
    while True:
        item = input_queue.get()
        if item is None:
            output_queue.put(None)
            break
        if item > 0:  # Filter
            output_queue.put(item * 2)

def stage2(input_queue: Queue, output_queue: Queue):
    """Second stage: Transform."""
    while True:
        item = input_queue.get()
    
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a3c95f19ae843b51
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from abc import ABC, abstractmethod

**Example:**

```python
from abc import ABC, abstractmethod
from typing import Optional, List

class UserRepository(ABC):
    @abstractmethod
    def get_by_id(self, user_id: int) -> Optional[dict]:
        """Get user by ID."""
        pass
    
    @abstractmethod
    def save(self, user: dict) -> dict:
        """Save user."""
        pass

class SQLUserRepository(UserRepository):
    def __init__(self, db_connection):
        self.db = db_connection
    
    def get_by_id(self, user_id: int) -> Optional[dict]:
    
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c57b83c1c7dab7bc
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

pass

**Example:**

```python
pass

class InMemoryUserRepository(UserRepository):
    def __init__(self):
        self._users = {}
    
    def get_by_id(self, user_id: int) -> Optional[dict]:
        return self._users.get(user_id)
    
    def save(self, user: dict) -> dict:
        self._users[user["id"]] = user
        return user
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2be66c32ad969cc1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class UserService:

**Example:**

```python
class UserService:
    def __init__(self, repository: UserRepository):
        self.repo = repository
    
    def get_user(self, user_id: int) -> Optional[dict]:
        return self.repo.get_by_id(user_id)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-cb0a651dce473cd1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Protocol

**Example:**

```python
from typing import Protocol

class IDatabase(Protocol):
    def execute(self, query: str, params: tuple) -> dict: ...

class Database:
    def execute(self, query: str, params: tuple) -> dict:
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-37f2c449bb571256
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return {"result": "data"}

**Example:**

```python
return {"result": "data"}

class Service:
    def __init__(self, db: IDatabase):
        self.db = db
    
    def process(self):
        return self.db.execute("SELECT * FROM data", ())
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-92f5bd3b749102ef
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from dependency_injector import containers, providers

**Example:**

```python
from dependency_injector import containers, providers

class Container(containers.DeclarativeContainer):
    db = providers.Singleton(Database)
    service = providers.Factory(Service, db=db)

container = Container()
service = container.service()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a8e0f982aa3af089
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Callable, Dict, List

**Example:**

```python
from typing import Callable, Dict, List
from dataclasses import dataclass
from enum import Enum

class EventType(Enum):
    USER_CREATED = "user_created"
    ORDER_PLACED = "order_placed"

@dataclass
class Event:
    event_type: EventType
    payload: dict

class EventBus:
    def __init__(self):
        self._handlers: Dict[EventType, List[Callable]] = {}
    
    def subscribe(self, event_type: EventType, handler: Callable[[Event], None]):
        if event_type not in self._handlers:
         
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9bf037e3b7279795
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Callable

**Example:**

```python
from typing import Callable

def federal_tax(amount: float) -> float:
    return amount * 0.25

def state_tax(amount: float) -> float:
    return amount * 0.05

def calculate_total(amount: float, tax_strategy: Callable[[float], float]) -> float:
    return amount + tax_strategy(amount)

# Usage
total1 = calculate_total(100, federal_tax)  # 125.0
total2 = calculate_total(100, state_tax)   # 105.0
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-775291e2631b7feb
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Dog:

**Example:**

```python
class Dog:
    def speak(self): return "Woof!"

class Cat:
    def speak(self): return "Meow!"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-eb3ac164a4968107
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def create_animal(animal_type: str):

**Example:**

```python
def create_animal(animal_type: str):
    animals = {"dog": Dog, "cat": Cat}
    return animals[animal_type]()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-dd541e63c402bdc0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Animal:

**Example:**

```python
class Animal:
    @classmethod
    def create(cls, animal_type: str):
        return cls._create(animal_type)
    
    @staticmethod
    def _create(animal_type: str):
        animals = {"dog": Dog, "cat": Cat}
        return animals[animal_type]()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-509a444e3b89da8c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from fastapi import FastAPI

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-524ddb367bf34612
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from fastapi import FastAPI

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-ee271c6b27c51d22
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from fastapi import FastAPI, Depends

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-37e42e79f618429d
- **Chapter:** `GLOBAL`
- **Language:** `mermaid`
- **Pattern Type:** `generic`

**Pattern:**

flowchart TD

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-ca4ffc95a6dcb4c7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def greet(name: str) -> str:

**Example:**

```python
def greet(name: str) -> str:
    """Return a greeting message for the given name."""
    return f"Hello, {name}!"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-bcceef1b74349ad7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Google-style docstring

**Example:**

```python
# ‚úÖ CORRECT: Google-style docstring
def scale(x: float, factor: float) -> float:
    """Scale a numeric value by a given factor.

    Args:
        x: Input value.
        factor: The number to multiply by.

    Returns:
        The scaled result.
    """
    return x * factor
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-da9a8b8c3eb99d7b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: NumPy-style docstring

**Example:**

```python
# ‚úÖ CORRECT: NumPy-style docstring
def scale(x, factor):
    """
    Scale a numeric value.

    Parameters
    ----------
    x : float
        Input value to be scaled.
    factor : float
        Scaling factor to apply.

    Returns
    -------
    float
        The scaled result.
    """
    return x * factor
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6415125a76571824
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Sphinx/RST style docstring

**Example:**

```python
# ‚úÖ CORRECT: Sphinx/RST style docstring
def scale(x, factor):
    """
    Scale a numeric value.

    :param x: Input value.
    :type x: float
    :param factor: Scale factor.
    :type factor: float
    :returns: Scaled result.
    :rtype: float
    """
    return x * factor
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0efd6cbb459ee001
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Class docstring with attributes

**Example:**

```python
# ‚úÖ CORRECT: Class docstring with attributes
class RateLimiter:
    """Token-bucket rate limiter with adjustable burst window.

    Attributes:
        rate: Tokens added per second.
        burst: Extra capacity available during spikes.
        tokens: Current token count.
    """

    def __init__(self, rate: float, burst: int):
        """Initialize the rate limiter.

        Args:
            rate: Tokens per second.
            burst: Maximum burst capacity.
        """
        self.rate = 
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e3ef20981d0c3137
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Function with comprehensive docstring

**Example:**

```python
# ‚úÖ CORRECT: Function with comprehensive docstring
def login_user(username: str, password: str) -> bool:
    """Authenticate a user against the credentials database.

    Args:
        username: The user's login name.
        password: Raw password input.

    Returns:
        True if the user is authenticated; otherwise False.

    Raises:
        AuthenticationError: If credentials are invalid.
        DatabaseError: If the database is unavailable.
    """
    # Implementation here
    pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e7070104b1a1ae90
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Async function docstring

**Example:**

```python
# ‚úÖ CORRECT: Async function docstring
async def fetch_user(uid: str) -> dict:
    """Fetch a user record asynchronously from the database.

    Args:
        uid: Unique user identifier.

    Returns:
        Dictionary containing user data with keys: id, name, email.

    Raises:
        UserNotFoundError: If the user does not exist.
    """
    # Implementation here
    pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-018bdae496aca278
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Generator docstring

**Example:**

```python
# ‚úÖ CORRECT: Generator docstring
def read_lines(path: str):
    """Yield lines lazily from a file.

    Args:
        path: Path to the text file.

    Yields:
        str: Each line from the file with trailing whitespace stripped.

    Raises:
        FileNotFoundError: If the file does not exist.
        PermissionError: If the file cannot be read.
    """
    with open(path) as f:
        for line in f:
            yield line.rstrip()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f2355776751484b8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Property docstring

**Example:**

```python
# ‚úÖ CORRECT: Property docstring
class User:
    """User account representation."""

    def __init__(self, first: str, last: str):
        self._first = first
        self._last = last

    @property
    def full_name(self) -> str:
        """Return the user's full name.

        Returns:
            Concatenated first and last name separated by a space.
        """
        return f"{self._first} {self._last}"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-bfbba22e545da8d2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Public function with docstring

**Example:**

```python
# ‚úÖ CORRECT: Public function with docstring
def process_payment(amount: float, currency: str) -> bool:
    """Process a payment transaction."""
    return _validate_and_charge(amount, currency)

# ‚úÖ CORRECT: Private function can skip docstring for simple cases
def _validate_and_charge(amount: float, currency: str) -> bool:
    # Implementation
    return True
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3a60ece051cbf4b3
- **Chapter:** `GLOBAL`
- **Language:** `rego`
- **Pattern Type:** `rule_head`

**Pattern:**

# ‚úÖ CORRECT: OPA policy for docstring enforcement

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-24c8c77914c30eb2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Detailed return type documentation

**Example:**

```python
# ‚úÖ CORRECT: Detailed return type documentation
def parse_config(path: str) -> dict[str, Any]:
    """Parse a YAML configuration file.

    Args:
        path: Path to the YAML configuration file.

    Returns:
        Dictionary containing parsed configuration with structure:
        {
            "database": {
                "host": str,
                "port": int,
                "credentials": dict
            },
            "logging": {
                "level": str,
                "handl
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-867efb38e937f8c0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Generic function with type variable documentation

**Example:**

```python
# ‚úÖ CORRECT: Generic function with type variable documentation
from typing import TypeVar, Callable

T = TypeVar('T')

def retry(func: Callable[[], T], max_attempts: int = 3) -> T:
    """Retry a function until it succeeds or max attempts is reached.

    Type Parameters:
        T: The return type of the function being retried.

    Args:
        func: Zero-argument callable to retry.
        max_attempts: Maximum number of retry attempts.

    Returns:
        The result of the successful func
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4e13629ae1975f7c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Context manager documentation

**Example:**

```python
# ‚úÖ CORRECT: Context manager documentation
from contextlib import contextmanager

@contextmanager
def database_transaction():
    """Context manager for database transactions with automatic rollback.

    Yields:
        Database connection with an open transaction.

    Examples:
        >>> with database_transaction() as conn:
        ...     conn.execute("INSERT INTO users VALUES (?, ?)", ("alice", 30))
        ...     # Transaction commits on successful exit

        >>> with database_transa
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-70aa7eb46a0268a3
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Decorator documentation

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f419caa4fd6a3594
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå INCORRECT: Provides no useful information

**Example:**

```python
# ‚ùå INCORRECT: Provides no useful information
def process_data(data):
    """Process data."""
    pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7775fc6a82136b91
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå INCORRECT: Just repeats what the name already says

**Example:**

```python
# ‚ùå INCORRECT: Just repeats what the name already says
def add(x, y):
    """Add function."""
    return x + y
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3a4d840cd1452fee
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå INCORRECT: Missing Raises section

**Example:**

```python
# ‚ùå INCORRECT: Missing Raises section
def parse_int(value: str) -> int:
    """Convert a string to an integer."""
    return int(value)  # Can raise ValueError!
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-de424237d74ec43e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå INCORRECT: Describes how instead of what

**Example:**

```python
# ‚ùå INCORRECT: Describes how instead of what
def authenticate(user: str, pwd: str) -> bool:
    """Check password by computing SHA256 hash and comparing with database.
    
    Uses the hashlib library to compute the hash, then queries the users
    table in PostgreSQL using SQLAlchemy ORM.
    """
    pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e47062c1f15acea9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Clear, complete, focused on contract

**Example:**

```python
# ‚úÖ CORRECT: Clear, complete, focused on contract
def parse_int(value: str) -> int:
    """Convert a string to an integer.

    Args:
        value: String representation of an integer.

    Returns:
        The integer value.

    Raises:
        ValueError: If the string cannot be converted to an integer.
    """
    return int(value)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4e5009185f564dac
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Describes behavior, not implementation

**Example:**

```python
# ‚úÖ CORRECT: Describes behavior, not implementation
def authenticate(user: str, pwd: str) -> bool:
    """Verify user credentials against stored credentials.

    Args:
        user: Username to authenticate.
        pwd: Password to verify.

    Returns:
        True if credentials are valid; False otherwise.

    Raises:
        DatabaseError: If credential verification fails due to database issues.
    """
    pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b16db8b646bc9622
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå INCORRECT: Exposes internal implementation details

**Example:**

```python
# ‚ùå INCORRECT: Exposes internal implementation details
def fetch_user(uid: str) -> dict:
    """Fetch user from database.
    
    Raises:
        psycopg2.OperationalError: If PostgreSQL connection fails.
        redis.ConnectionError: If Redis cache is unavailable.
    """
    pass

# ‚úÖ CORRECT: Public API uses abstracted exceptions
def fetch_user(uid: str) -> dict:
    """Fetch user from database.
    
    Raises:
        DatabaseError: If user data cannot be retrieved.
        UserNotFoundEr
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0e59b9455fe69a5e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå INCORRECT: Docstring doesn't match signature

**Example:**

```python
# ‚ùå INCORRECT: Docstring doesn't match signature
def process_order(order_id: str, priority: bool = False) -> dict:
    """Process an order.
    
    Args:
        order_id: Order identifier.
        expedite: Whether to expedite shipping.  # ‚ùå Wrong parameter name!
    """
    pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fff06a1f780d63c1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚ùå INCORRECT: States the obvious

**Example:**

```python
# ‚ùå INCORRECT: States the obvious
def get_name(self) -> str:
    """Get the name.
    
    Returns:
        str: The name.
    """
    return self._name

# ‚úÖ CORRECT: Adds value
def get_name(self) -> str:
    """Return the user's display name.
    
    Returns:
        Full name if available; otherwise username.
    """
    return self._full_name or self._username
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9eb6911a10d41915
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Sphinx-compatible docstring

**Example:**

```python
# ‚úÖ CORRECT: Sphinx-compatible docstring
def calculate_tax(amount: float, rate: float) -> float:
    """Calculate tax on a given amount.

    Args:
        amount: Pre-tax amount in dollars.
        rate: Tax rate as a decimal (e.g., 0.08 for 8%).

    Returns:
        Tax amount in dollars.

    Examples:
        >>> calculate_tax(100.0, 0.08)
        8.0
        >>> calculate_tax(50.0, 0.10)
        5.0
    """
    return amount * rate
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a777f6799f7c85f2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Doctest examples in docstring

**Example:**

```python
# ‚úÖ CORRECT: Doctest examples in docstring
def factorial(n: int) -> int:
    """Calculate factorial of n.

    Args:
        n: Non-negative integer.

    Returns:
        Factorial of n.

    Raises:
        ValueError: If n is negative.

    Examples:
        >>> factorial(0)
        1
        >>> factorial(5)
        120
        >>> factorial(-1)
        Traceback (most recent call last):
            ...
        ValueError: n must be non-negative
    """
    if n < 0:
        raise ValueError
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-bdb0a685bb99cce0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# ‚úÖ CORRECT: Docstring consistent with type hints

**Example:**

```python
# ‚úÖ CORRECT: Docstring consistent with type hints
def divide(x: float, y: float) -> float:
    """Divide x by y.

    Args:
        x: Numerator.
        y: Denominator.

    Returns:
        Result of division.

    Raises:
        ZeroDivisionError: If y is zero.
    """
    if y == 0:
        raise ZeroDivisionError("Cannot divide by zero")
    return x / y
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1ce0b9e2883e04f1
- **Chapter:** `GLOBAL`
- **Language:** ``
- **Pattern Type:** `generic`

**Pattern:**

State = (Env, Stack, Heap, IP, Exception, Tasks)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-39e58a36ff95005f
- **Chapter:** `GLOBAL`
- **Language:** ``
- **Pattern Type:** `generic`

**Pattern:**

State = (Env, Stack, Heap, IP, Exception)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-16f8f78376f2fbee
- **Chapter:** `GLOBAL`
- **Language:** ``
- **Pattern Type:** `python-structure`

**Pattern:**

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  [Eval-FunDef]

**Example:**

```
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  [Eval-FunDef]
Env' = {x ‚Ü¶ v | x ‚àà free_vars(fun_body) ‚àß x ‚àà dom(Env)}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚ü®def outer(x): ... def inner(y): return x + y, Env‚ü© 
  ‚Üí ‚ü®closure(inner_code, Env' = {x ‚Ü¶ Env[x]}), Env‚ü©
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-487da856570097b0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def outer(x):

**Example:**

```python
def outer(x):
    def inner(y):
        return x + y
    return inner

# Formal representation:
# outer_code = Œªx. (Œªy. x + y)
# When outer(5) is called:
#   Env_captured = {x ‚Ü¶ 5}
#   Returns: closure(inner_code, {x ‚Ü¶ 5})
# When closure(3) is called:
#   Env_new = {x ‚Ü¶ 5, y ‚Ü¶ 3}
#   Evaluates: x + y ‚Üí 5 + 3 ‚Üí 8
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9aaf6a2541d72297
- **Chapter:** `GLOBAL`
- **Language:** ``
- **Pattern Type:** `generic`

**Pattern:**

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  [T-Var]

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-02f493372e3a1850
- **Chapter:** `GLOBAL`
- **Language:** ``
- **Pattern Type:** `generic`

**Pattern:**

Set = {x‚ÇÅ, x‚ÇÇ, ..., x‚Çô}    (unordered, unique)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-be9543517616dcb6
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from typing import List, Dict, Any, Callable

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4a6d807aaa8ed58c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

result = self._process(task, context)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a7a4c614b0984953
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return f"Architecture proposal for: {task}"

**Example:**

```python
return f"Architecture proposal for: {task}"

class ReviewerAgent(BaseAgent):
    """Reviews code for patterns and compliance."""
    
    def __init__(self, *args, rules: List[str], **kwargs):
        super().__init__(*args, **kwargs)
        self.rules = rules
    
    def _process(self, task: str, context: Dict[str, Any]) -> str:
        code = context.get("code", "")
        violations = []
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a97a36d6da56d0df
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

for rule in self.rules:

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a13ebb9e09fe570f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return False

**Example:**

```python
return False

class TesterAgent(BaseAgent):
    """Generates tests for code."""
    
    def _process(self, task: str, context: Dict[str, Any]) -> str:
        code = context.get("code", "")
        test_code = f"""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e7b259bdcd4707cb
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import pytest

**Example:**

```python
import pytest

def test_basic_functionality():
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7f20249b4e70ba6e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

pass

**Example:**

```python
pass

def test_edge_cases():
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-80680d98a1b66f99
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

pass

**Example:**

```python
pass
"""
        return test_code

class SecurityAgent(BaseAgent):
    """Checks for security anti-patterns."""
    
    SECURITY_PATTERNS = [
        "subprocess.run",
        "eval(",
        "exec(",
        "pickle.loads",
        "yaml.load(",
    ]
    
    def _process(self, task: str, context: Dict[str, Any]) -> str:
        code = context.get("code", "")
        issues = []
        
        for pattern in self.SECURITY_PATTERNS:
            if pattern in code:
                issues.app
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9728dce788f6f996
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

if "failed" in review_result.content.lower():

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-25f2f99367f03b7e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import List, Dict, Any

**Example:**

```python
from typing import List, Dict, Any
from dataclasses import dataclass

@dataclass
class ReActStep:
    thought: str
    action: str
    action_input: Dict[str, Any]
    observation: str

class ReActAgent:
    """ReAct pattern agent: reasons before acting."""
    
    def __init__(self, llm_client, tools: Dict[str, Callable], max_steps: int = 10):
        self.llm_client = llm_client
        self.tools = tools
        self.max_steps = max_steps
        self.steps: List[ReActStep] = []
    
    def
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4c3fbd897b6806d2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

self.steps.append(ReActStep(

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8605194b2e449139
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return f"Analyzing: {observation}"

**Example:**

```python
return f"Analyzing: {observation}"
    
    def _decide_action(self, thought: str) -> tuple[str, Dict[str, Any]]:
        """Decide next action based on thought."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-83bb998bb27c863f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return "FINISH", {}

**Example:**

```python
return "FINISH", {}
    
    def _extract_answer(self, thought: str) -> str:
        """Extract final answer from thought."""
        return thought
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a4db144cdcedfdd8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def read_file(path: str) -> str:

**Example:**

```python
def read_file(path: str) -> str:
    """Read file content."""
    with open(path, 'r') as f:
        return f.read()

def write_file(path: str, content: str) -> None:
    """Write file content."""
    with open(path, 'w') as f:
        f.write(content)

agent = ReActAgent(
    llm_client=None,
    tools={"read_file": read_file, "write_file": write_file}
)

result = agent.execute("Read config.json and update the version field")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-715011718ed13212
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from langchain.agents import AgentExecutor, create_openai_tools_agent

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2b6193a2256e5568
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def search_codebase(query: str) -> str:

**Example:**

```python
def search_codebase(query: str) -> str:
    """Search codebase for patterns."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8ccbc6ebab7c5be6
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return f"Found: {query}"

**Example:**

```python
return f"Found: {query}"

def run_tests() -> str:
    """Run test suite."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-67ee100c24f8267f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

llm = ChatOpenAI(model="gpt-4o", temperature=0)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b0cb6907110c39cf
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from crewai import Agent, Task, Crew

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9593cc857a64e777
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class CodeCleanupAgent:

**Example:**

```python
class CodeCleanupAgent:
    """Multi-agent system for code cleanup."""
    
    def __init__(self):
        self.agents = {
            "analyzer": self._analyze_code,
            "refactorer": self._refactor_code,
            "validator": self._validate_code,
        }
    
    def cleanup(self, code: str) -> str:
        """Clean up code using agent pipeline."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d0836f6b3d8e8db9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

if self.agents["validator"](cleaned):

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-62b5e5ff7ee31061
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return code

**Example:**

```python
return code
    
    def _validate_code(self, code: str) -> bool:
        """Validate refactored code."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d0c1d2221877a1c6
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from typing import List, Dict, Any, Optional

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6b6459b22497ec4d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

if not str(file_path.resolve()).startswith(str(Path.cwd().resolve())):

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6b6459b22497ec4d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

if not str(file_path.resolve()).startswith(str(Path.cwd().resolve())):

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8afd0683736130f8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

try:

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3010f935747eb47a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

ALLOWED_COMMANDS = ["ls", "pwd", "cat", "grep"]

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e014d5b5897813cc
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

file_path = "config.json"  # In real implementation, extract from task

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-09c10c9a4e36a025
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Callable, Optional

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7c6cf8a59f08940c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

failures = 0

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-4c11832c1e2c68e4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

if error_type == ErrorType.RATE_LIMIT:

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0b00780def8da117
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return self.retry_strategy(self._call_llm, task)

**Example:**

```python
return self.retry_strategy(self._call_llm, task)
    
    def _call_llm(self, task: str) -> str:
        """Call LLM (simplified)."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-dae2123df9fa0851
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

if "fail" in task.lower():

**Example:**

```python
if "fail" in task.lower():
            raise Exception("Simulated LLM failure")
        return f"Result for: {task}"
    
    def _classify_error(self, error: Exception) -> ErrorType:
        """Classify error type."""
        error_str = str(error).lower()
        if "rate limit" in error_str or "429" in error_str:
            return ErrorType.RATE_LIMIT
        elif "timeout" in error_str:
            return ErrorType.TIMEOUT
        elif "invalid" in error_str or "parse" in error_str:
       
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-81f6dfa69b3a5bcf
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

simplified_task = task[:100]  # Truncate

**Example:**

```python
simplified_task = task[:100]  # Truncate
        return self._execute_primary(simplified_task)
    
    def _handle_invalid_response(self, task: str) -> str:
        """Handle invalid LLM responses."""
        logging.info("Invalid response, requesting structured output...")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fb343bc0317c2c03
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

structured_task = f"{task}\n\nRespond in JSON format only."

**Example:**

```python
structured_task = f"{task}\n\nRespond in JSON format only."
        return self._execute_primary(structured_task)
    
    def _handle_tool_error(self, task: str, error: Exception) -> str:
        """Handle tool execution errors."""
        logging.warning(f"Tool error: {error}")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5b27c46b91b64ada
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return f"Task partially completed. Tool error: {error}"

**Example:**

```python
return f"Task partially completed. Tool error: {error}"
    
    def _handle_generic_error(self, task: str, error: Exception) -> str:
        """Handle generic errors."""
        logging.error(f"Unrecoverable error: {error}")
        return f"Task failed: {error}"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-038dcdd7e3004e6a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from functools import lru_cache

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9d3a0bd9581c6b9e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

self.cache[cache_key] = CacheEntry(

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-df4aa5eb2fbb8b90
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

cost_per_task = cost / len(tasks)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c1417d1d275793a7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

tokens = len(prompt.split()) * 1.3  # Rough estimate

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8f81c227314286d1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class CodeReviewAgent(CostOptimizedAgent):

**Example:**

```python
class CodeReviewAgent(CostOptimizedAgent):
    """Code review agent with cost optimization."""
    
    def review_file(self, file_path: str) -> Dict[str, Any]:
        """Review a file with caching."""
        with open(file_path, 'r') as f:
            code = f.read()
        
        # Use cached execution
        review = self.execute_cached(
            f"Review this Python code for issues:\n\n{code}",
            context={"file": file_path}
        )
        
        return {
            "
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-123df11a94f5c98f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from langchain.agents import AgentExecutor, create_openai_tools_agent

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a78b04b04d41035a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class CodeReviewInput(BaseModel):

**Example:**

```python
class CodeReviewInput(BaseModel):
    file_path: str = Field(description="Path to the file to review")
    rules: list[str] = Field(default=[], description="Specific rules to check")

def review_code(file_path: str, rules: list[str] = None) -> str:
    """Review Python code for quality issues."""
    with open(file_path, 'r') as f:
        code = f.read()
    
    issues = []
    if "import *" in code:
        issues.append("Wildcard import detected")
    if "eval(" in code:
        issues.appen
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e9058df273669a2b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

review_tool = StructuredTool.from_function(

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-cae2945988506d6e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

llm = ChatOpenAI(model="gpt-4o", temperature=0, streaming=True)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d7f096551dff411b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from langchain.vectorstores import Chroma

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9e1bfa26b3c0b0d1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

embeddings = OpenAIEmbeddings()

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-ec44c1c80785231d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

qa_chain = ConversationalRetrievalChain.from_llm(

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e9108ad8f924f767
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from llama_index import VectorStoreIndex, ServiceContext

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7e065752f6ef3f2e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

llm = OpenAI(model="gpt-4", temperature=0)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-64a3866c751d7d7c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from llama_index import SimpleDirectoryReader

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-ef1d827ac0dfb22e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

index = VectorStoreIndex.from_documents(documents, service_context=service_context)

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-ab42adaff040e8c9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def search_codebase(query: str) -> str:

**Example:**

```python
def search_codebase(query: str) -> str:
    """Search codebase for patterns."""
    query_engine = index.as_query_engine()
    response = query_engine.query(query)
    return str(response)

def analyze_dependencies(file_path: str) -> str:
    """Analyze dependencies for a file."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-34d7123489391162
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

tools = [

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e55cfe2dea9da852
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

agent = ReActAgent.from_tools(

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5392d61a8827433f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from llama_index.tools import ToolMetadata

**Example:**

```python
from llama_index.tools import ToolMetadata
from llama_index.agent import OpenAIAgent

class CodebaseTool:
    """Custom tool for codebase operations."""
    
    def __init__(self, codebase_path: str):
        self.codebase_path = codebase_path
    
    def read_file(self, file_path: str) -> str:
        """Read file from codebase."""
        full_path = f"{self.codebase_path}/{file_path}"
        with open(full_path, 'r') as f:
            return f.read()
    
    def list_files(self, directory
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e206c0799c1982b1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from llama_index.tools import FunctionTool

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d869d68c7c3dff7b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

agent = OpenAIAgent.from_tools(

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0836ca0a9fc84959
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import hashlib

**Example:**

```python
import hashlib
from pathlib import Path

class SnapshotTester:
    """Test AI-generated code against snapshots."""
    
    def __init__(self, snapshot_dir: Path = Path("snapshots")):
        self.snapshot_dir = snapshot_dir
        self.snapshot_dir.mkdir(exist_ok=True)
    
    def test_generated_code(self, task: str, generated_code: str) -> bool:
        """Test generated code against snapshot."""
        snapshot_path = self.snapshot_dir / f"{self._hash_task(task)}.py"
        
        if sn
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-03c189ded406b0c8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

snapshot_path.write_text(generated_code)

**Example:**

```python
snapshot_path.write_text(generated_code)
            print(f"Created snapshot: {snapshot_path}")
            return True
    
    def _hash_task(self, task: str) -> str:
        """Generate hash for task."""
        return hashlib.sha256(task.encode()).hexdigest()[:16]
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7598f33be6e39dd3
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

tester = SnapshotTester()

**Example:**

```python
tester = SnapshotTester()
tester.test_generated_code(
    "Create user authentication",
    "def authenticate(): pass"
)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b51fccbc29b9535d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import ast

**Example:**

```python
import ast
import inspect

class BehavioralTester:
    """Test that generated functions obey invariants."""
    
    def test_function(self, code: str, invariants: list[callable]) -> bool:
        """Test function against invariants."""
        try:
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8ddd56e77b6b62e4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

for invariant in invariants:

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e4419e849f413c96
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def invariant_no_side_effects(func):

**Example:**

```python
def invariant_no_side_effects(func):
    """Check that function has no side effects."""
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c26c53a5be342ba6
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return True

**Example:**

```python
return True

tester = BehavioralTester()
tester.test_function(
    "def add(a, b): return a + b",
    [invariant_no_side_effects]
)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2796267d403a7e46
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import subprocess

**Example:**

```python
import subprocess
from pathlib import Path

class CodeQualityChecker:
    """Run linting and type checking on generated code."""
    
    def check(self, code: str, output_file: Path = Path("temp_code.py")) -> dict:
        """Check code quality."""
        # Write code to temp file
        output_file.write_text(code)
        
        results = {
            "ruff": self._run_ruff(output_file),
            "mypy": self._run_mypy(output_file),
            "pytest": self._run_pytest(output_file),
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8112f4340232002b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import random

**Example:**

```python
import random
import json

class AdversarialTester:
    """Test code robustness against adversarial inputs."""
    
    def test_robustness(self, func: callable, test_cases: list) -> dict:
        """Test function with adversarial inputs."""
        results = {
            "passed": 0,
            "failed": 0,
            "errors": []
        }
        
        for test_case in test_cases:
            try:
                result = func(*test_case["args"], **test_case["kwargs"])
                r
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-14e1e7bcf1fea2b0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def example_func(data: str) -> str:

**Example:**

```python
def example_func(data: str) -> str:
    """Example function to test."""
    return data.upper()

tester = AdversarialTester()
test_cases = tester.generate_adversarial_inputs()
results = tester.test_robustness(example_func, test_cases)
print(f"Passed: {results['passed']}, Failed: {results['failed']}")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-26207d244fc64d7d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import config

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5fc41a5005ebccc1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class DatabaseConnection:

**Example:**

```python
class DatabaseConnection:
    _instance = None
    _lock = threading.Lock()
    
    def __new__(cls):
        if cls._instance is None:
            with cls._lock:  # Thread-safe
                if cls._instance is None:
                    cls._instance = super().__new__(cls)
                    cls._instance._initialized = False
        return cls._instance
    
    def __init__(self):
        if not self._initialized:
            self.connection = self._connect()
            self._initialize
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7d633d27a6f94506
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import threading

**Example:**

```python
import threading
from typing import Any

class SingletonMeta(type):
    _instances: dict[type, Any] = {}
    _lock = threading.Lock()
    
    def __call__(cls, *args, **kwargs):
        if cls not in cls._instances:
            with cls._lock:
                if cls not in cls._instances:
                    cls._instances[cls] = super().__call__(*args, **kwargs)
        return cls._instances[cls]

class Logger(metaclass=SingletonMeta):
    def __init__(self):
        self.logs = []
    
    de
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a4a52af134c17bc4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import config

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3fe54401859dd10f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import config

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0a7cd40184fec2ea
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@dataclass

**Example:**

```python
@dataclass
class Config:
    api_url: str
    timeout: int
    debug: bool = False
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d2858fe517a6f879
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def create_app(config: Config):

**Example:**

```python
def create_app(config: Config):
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-bddba49e94574ec9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def create_parser(kind: str):

**Example:**

```python
def create_parser(kind: str):
    match kind:
        case "json": return JSONParser()
        case "yaml": return YAMLParser()
        case "xml": return XMLParser()
        case _: raise ValueError(f"Unknown parser: {kind}")

# Usage
parser = create_parser("json")
data = parser.parse(text)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-38abcd9203fb1e97
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

PARSERS: dict[str, type[Parser]] = {

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-41367be15ec6959f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Protocol

**Example:**

```python
from typing import Protocol

class Parser(Protocol):
    def parse(self, text: str) -> dict: ...

class ParserFactory(Protocol):
    def create(self) -> Parser: ...

class JSONParserFactory:
    def create(self) -> Parser:
        return JSONParser()

class YAMLParserFactory:
    def create(self) -> Parser:
        return YAMLParser()

# Usage
factory: ParserFactory = JSONParserFactory()
parser = factory.create()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a2679c2f225ce333
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Protocol

**Example:**

```python
from typing import Protocol
from dataclasses import dataclass

@dataclass
class DatabaseConfig:
    host: str
    port: int
    database: str

class Database(Protocol):
    def connect(self) -> None: ...
    def query(self, sql: str) -> list[dict]: ...

class PostgreSQLDatabase:
    def __init__(self, config: DatabaseConfig):
        self.config = config
    
    def connect(self) -> None:
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5f849bb9e1cdf8d0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

pass

**Example:**

```python
pass
    
    def query(self, sql: str) -> list[dict]:
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-60efc3a7be1d67ee
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

return []

**Example:**

```python
return []

class MySQLDatabase:
    def __init__(self, config: DatabaseConfig):
        self.config = config
    
    def connect(self) -> None:
        pass
    
    def query(self, sql: str) -> list[dict]:
        return []

def create_database(db_type: str, config: DatabaseConfig) -> Database:
    factories = {
        "postgresql": PostgreSQLDatabase,
        "mysql": MySQLDatabase,
    }
    
    factory = factories.get(db_type)
    if factory is None:
        raise ValueError(f"Unknown dat
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b0785756dfab7ff8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class AbstractFactory(ABC):

**Example:**

```python
class AbstractFactory(ABC):
    @abstractmethod
    def create(self): ...

class ConcreteFactory(AbstractFactory):
    def create(self):
        return ConcreteProduct()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-460177bc01bdcfed
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def create_product():

**Example:**

```python
def create_product():
    return ConcreteProduct()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-8972aa1c1db02364
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# GOOD: Simple and Pythonic

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-0504e6dce82a8d83
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Callable, Any, TypeVar

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6ae88e6fca5cc1fc
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Protocol

**Example:**

```python
from typing import Protocol
from dataclasses import dataclass

class Database(Protocol):
    def query(self, sql: str) -> list[dict]: ...

class Logger(Protocol):
    def log(self, message: str) -> None: ...

@dataclass
class UserService:
    db: Database
    logger: Logger
    
    def get_user(self, user_id: int) -> dict | None:
        self.logger.log(f"Fetching user {user_id}")
        results = self.db.query(f"SELECT * FROM users WHERE id = {user_id}")
        return results[0] if results e
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b41bc25137e51cc2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def create_user_service(db: Database, logger: Logger) -> UserService:

**Example:**

```python
def create_user_service(db: Database, logger: Logger) -> UserService:
    return UserService(db=db, logger=logger)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5eb5170adce58f5d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import inspect

**Example:**

```python
import inspect
from typing import get_type_hints

class AutoContainer:
    def __init__(self):
        self._services: dict[type, Any] = {}
        self._factories: dict[type, Callable] = {}
    
    def register_singleton(self, service_type: type, instance: Any) -> None:
        self._services[service_type] = instance
    
    def register_factory(self, service_type: type, factory: Callable) -> None:
        self._factories[service_type] = factory
    
    def resolve(self, service_type: type) 
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-dbaf0ab1dab04c37
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# BAD: Hard to test, tight coupling

**Example:**

```python
# BAD: Hard to test, tight coupling
import database
import logger

class UserService:
    def get_user(self, user_id: int):
        logger.log(f"Fetching {user_id}")  # Global dependency
        return database.query(f"SELECT * FROM users WHERE id = {user_id}")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a0fcb08860bfc3b2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# GOOD: Testable, explicit dependencies

**Example:**

```python
# GOOD: Testable, explicit dependencies
class UserService:
    def __init__(self, db: Database, logger: Logger):
        self.db = db
        self.logger = logger
    
    def get_user(self, user_id: int):
        self.logger.log(f"Fetching {user_id}")
        return self.db.query(f"SELECT * FROM users WHERE id = {user_id}")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-303c707791285940
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def greet(name: str) -> str:

**Example:**

```python
def greet(name: str) -> str:
    return f"Hello, {name}!"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7db0617fe8aa756b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class User:

**Example:**

```python
class User:
    def __init__(self, name: str):
        self.name = name
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6ee5f80826191233
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process(data: list[int]) -> dict[str, int]:

**Example:**

```python
def process(data: list[int]) -> dict[str, int]:
    return {"count": len(data)}

# Variable arguments
def func(*args: int, **kwargs: str) -> None:
    pass

# Callable
from typing import Callable
handler: Callable[[int, str], bool] = my_func
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-981ce9d37e0aefaa
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import TypeVar, Generic

**Example:**

```python
from typing import TypeVar, Generic

T = TypeVar("T")

class Container(Generic[T]):
    def __init__(self, value: T):
        self.value = value
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c9bcee9da7f0089f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Protocol

**Example:**

```python
from typing import Protocol

class Drawable(Protocol):
    def draw(self) -> None: ...

def render(obj: Drawable) -> None:
    obj.draw()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c09ab291d5a23a98
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def test_function():

**Example:**

```python
def test_function():
    assert add(1, 2) == 3
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-bf935a8ccf0af47a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@pytest.mark.parametrize("a,b,expected", [(1,2,3), (0,5,5)])

**Example:**

```python
@pytest.mark.parametrize("a,b,expected", [(1,2,3), (0,5,5)])
def test_add(a, b, expected):
    assert add(a, b) == expected
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2cd41172391d7204
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@pytest.fixture

**Example:**

```python
@pytest.fixture
def data():
    return [1, 2, 3]

def test_process(data):
    assert len(data) == 3
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1db7c9eb3852afb5
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from unittest.mock import Mock, patch

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e6039115dfa82ad5
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import asyncio

**Example:**

```python
import asyncio
import time

async def slow():
    time.sleep(3)  # BLOCKS entire event loop!
    return "done"

async def main():
    await slow()  # All other tasks wait
    print("finished")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-608be398bec37a71
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import asyncio

**Example:**

```python
import asyncio

async def slow():
    await asyncio.sleep(3)  # Non-blocking
    return "done"

async def main():
    await slow()
    print("finished")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-38523a5cff8be804
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import requests  # Blocking library

**Example:**

```python
import requests  # Blocking library
import asyncio

async def fetch_data():
    response = requests.get("https://api.example.com")  # BLOCKS!
    return response.json()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-21243c2743b15033
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import httpx  # Async HTTP client

**Example:**

```python
import httpx  # Async HTTP client
import asyncio

async def fetch_data():
    async with httpx.AsyncClient() as client:
        response = await client.get("https://api.example.com")
        return response.json()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-96ab03eb81a24a85
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

async def background_task():

**Example:**

```python
async def background_task():
    await asyncio.sleep(10)
    print("Task completed")

async def main():
    asyncio.create_task(background_task())  # Task may be garbage collected!
    await asyncio.sleep(1)  # Main exits before task completes
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-cc9e5d00942a49ee
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

async def main():

**Example:**

```python
async def main():
    task = asyncio.create_task(background_task())
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c0e927ab56f34ada
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

async def fetch():

**Example:**

```python
async def fetch():
    return {"data": "value"}

async def main():
    result = fetch()  # Returns coroutine object, not result!
    print(result)  # <coroutine object fetch at 0x...>
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9acc0607fcff5c15
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

async def main():

**Example:**

```python
async def main():
    result = await fetch()  # Actually execute coroutine
    print(result)  # {'data': 'value'}
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b629f7b586d7b352
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import asyncio

**Example:**

```python
import asyncio

lock = asyncio.Lock()

async def task1():
    async with lock:
        await asyncio.sleep(1)
        async with lock:  # DEADLOCK! (reentrant lock needed)
            pass

async def main():
    await task1()  # Hangs forever
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b4740575a07bbe30
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

lock = asyncio.Lock()

**Example:**

```python
lock = asyncio.Lock()

async def task1():
    async with lock:
        await asyncio.sleep(1)
        # Don't acquire same lock again, or use asyncio's reentrant lock
        pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-cd7ab9e422c036cb
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

async def failing_task():

**Example:**

```python
async def failing_task():
    raise ValueError("Error!")

async def main():
    task = asyncio.create_task(failing_task())
    # Exception is silently swallowed!
    await asyncio.sleep(1)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-497a83b404503ac1
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

async def main():

**Example:**

```python
async def main():
    task = asyncio.create_task(failing_task())
    try:
        await task
    except ValueError as e:
        print(f"Task failed: {e}")
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-cd83283d5943176a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

async def inner():

**Example:**

```python
async def inner():
    await asyncio.sleep(1)

async def outer():
    asyncio.run(inner())  # ERROR: Cannot call run() from running event loop
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e0f9866ea7f4c8df
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

async def outer():

**Example:**

```python
async def outer():
    await inner()  # Just await directly
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1aec5f946a924a0e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import threading

**Example:**

```python
import threading

def cpu_bound_task(n):
    total = 0
    for i in range(n):
        total += i * i
    return total
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b951e97523cf5709
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import multiprocessing

**Example:**

```python
import multiprocessing

def cpu_bound_task(n):
    total = 0
    for i in range(n):
        total += i * i
    return total

if __name__ == "__main__":
    with multiprocessing.Pool() as pool:
        results = pool.map(cpu_bound_task, [10_000_000, 10_000_000])
    # Actually runs in parallel across CPU cores
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-bd22f8acf0e3a4c5
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import threading

**Example:**

```python
import threading
import requests

def fetch_url(url):
    response = requests.get(url)  # I/O operation releases GIL
    return response.status_code

threads = [
    threading.Thread(target=fetch_url, args=(url,))
    for url in urls
]

for t in threads:
    t.start()
for t in threads:
    t.join()

# Threads work well here because I/O releases GIL
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c965105da1bb5e8f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

# This is SLOWER than sequential!

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a7ef7a0a730e6cca
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

counter = 0

**Example:**

```python
counter = 0

def increment():
    global counter
    for _ in range(100_000):
        counter += 1  # NOT atomic! Race condition possible

threads = [threading.Thread(target=increment) for _ in range(10)]
for t in threads:
    t.start()
for t in threads:
    t.join()

print(counter)  # May be < 1_000_000 due to race conditions
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-08bee711214a8d10
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import threading

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c904988e1fa623b5
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def add(a: int, b: int) -> int:

**Example:**

```python
def add(a: int, b: int) -> int:
    return a + b

result = add("hello", "world")  # No error at runtime!
print(result)  # "helloworld" (works, but wrong type)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7d00f83080e07c24
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import assert_type

**Example:**

```python
from typing import assert_type

def add(a: int, b: int) -> int:
    assert_type(a, int)  # Runtime check (Python 3.13+)
    assert_type(b, int)
    return a + b
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-034ab49f54b68c68
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from pydantic import validate_call

**Example:**

```python
from pydantic import validate_call

@validate_call
def add(a: int, b: int) -> int:
    return a + b
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-67186c19b907a706
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Any

**Example:**

```python
from typing import Any

def process(data: Any) -> Any:
    return data.anything()  # Type checker can't help

result: Any = process(123)
result.foo.bar.baz  # No type errors, but runtime error!
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-361965339ed55695
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Protocol

**Example:**

```python
from typing import Protocol

class Processable(Protocol):
    def process(self) -> str: ...

def process(data: Processable) -> str:
    return data.process()  # Type-safe
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-17ef193d50a8a03e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import TypedDict

**Example:**

```python
from typing import TypedDict

class Config(TypedDict):
    items: list[str]

def create_config(items: list[str] = []) -> Config:  # Mutable default!
    return {"items": items}

config1 = create_config()
config2 = create_config()
config1["items"].append("x")
print(config2["items"])  # ['x'] - shared list!
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9945da5f0d28998c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def create_config(items: list[str] | None = None) -> Config:

**Example:**

```python
def create_config(items: list[str] | None = None) -> Config:
    if items is None:
        items = []
    return {"items": items}
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-3cacfe066fb5da13
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import TypeVar

**Example:**

```python
from typing import TypeVar

T = TypeVar("T", bound=int)  # Too restrictive

def identity(x: T) -> T:
    return x

identity("hello")  # Type error, but maybe you wanted str support
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-58db599003b656ef
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

T = TypeVar("T")  # Unconstrained

**Example:**

```python
T = TypeVar("T")  # Unconstrained

def identity(x: T) -> T:
    return x

identity("hello")  # Works
identity(42)  # Works
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-78306b63265653c9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Protocol

**Example:**

```python
from typing import Protocol

class Drawable(Protocol):
    def draw(self) -> None: ...

class Circle:
    def draw(self, color: str) -> None:  # Extra parameter!
        print(f"Drawing circle in {color}")

def render(obj: Drawable):
    obj.draw()  # Type error: draw() signature doesn't match

circle = Circle()
render(circle)  # Runtime error: missing argument
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d84af8426ab52d42
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Circle:

**Example:**

```python
class Circle:
    def draw(self, color: str = "black") -> None:  # Default parameter
        print(f"Drawing circle in {color}")

def render(obj: Drawable):
    obj.draw()  # Works: default parameter satisfies protocol
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-f1af3d1698e78e75
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import TypeVar, Generic

**Example:**

```python
from typing import TypeVar, Generic

T = TypeVar("T")

class Container(Generic[T]):
    def __init__(self, value: T):
        self.value = value

def get_value(container: Container) -> int:  # Missing type parameter!
    return container.value  # Type checker can't infer T
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-381c3516c17072df
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def get_value(container: Container[int]) -> int:

**Example:**

```python
def get_value(container: Container[int]) -> int:
    return container.value  # Type-safe
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-49904e73983794fd
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import Optional

**Example:**

```python
from typing import Optional

def process(data: Optional[str]) -> str:
    return data.upper()  # Type error: data might be None
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2fbf409038e34ba4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process(data: Optional[str]) -> str:

**Example:**

```python
def process(data: Optional[str]) -> str:
    if data is None:
        return ""
    return data.upper()  # Type checker knows data is str here
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6cb82c1af5fbcfd9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import TypeVar, Generic

**Example:**

```python
from typing import TypeVar, Generic

T = TypeVar("T")

class Box(Generic[T]):
    def put(self, item: T) -> None: ...
    def get(self) -> T: ...

def put_string(box: Box[str]) -> None:
    box.put("hello")

string_box: Box[str] = Box()
any_box: Box[object] = string_box  # Type error: Box is invariant
put_string(any_box)  # Would allow putting non-string!
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7008fb8e94288559
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from typing import TypeVar, Generic

**Example:**

```python
from typing import TypeVar, Generic

T_co = TypeVar("T_co", covariant=True)

class ReadOnlyBox(Generic[T_co]):
    def get(self) -> T_co: ...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7b702ee4a0b45097
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import ast

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2df15e064bc5d7aa
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import os

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-18a7277a039b6b67
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from dotenv import load_dotenv

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-61ed38771a829421
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import requests

**Example:**

```python
import requests
from urllib.parse import urlparse

def safe_get(url: str):
    parsed = urlparse(url)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-25229e373e4ed854
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import sqlite3

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c951adcaf4c849e3
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import sqlite3

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2991f280c7bc4e9f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from sqlalchemy import text

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-7fbf069951bc2676
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from pathlib import Path

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-93fb9552e8f40360
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import subprocess

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-97b6ddddf4fba92b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

from fastapi import FastAPI

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b7b05c691681d34b
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@app.get("/users/{user_id}")

**Example:**

```python
@app.get("/users/{user_id}")
def get_user(user_id: str):
    try:
        user = db.get_user(user_id)
        return {"user": user}
    except UserNotFound:
        raise HTTPException(status_code=404, detail="User not found")
    except Exception:
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-dbb08d6d68fab033
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import time

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6a7985050436324f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def find_item(items, target):

**Example:**

```python
def find_item(items, target):
    try:
        return items.index(target)
    except ValueError:
        return -1
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-2ebdc75aae7e4e23
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

def find_item(items, target):

**Example:**

```python
def find_item(items, target):
    if target in items:  # Fast membership check
        return items.index(target)
    return -1
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d2ce7a174dc0b875
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def factorial(n):

**Example:**

```python
def factorial(n):
    if n <= 1:
        return 1
    return n * factorial(n - 1)  # Deep recursion

factorial(10000)  # RecursionError: maximum recursion depth exceeded
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-dc19b4b157eb040e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def factorial(n):

**Example:**

```python
def factorial(n):
    result = 1
    for i in range(2, n + 1):  # Iterative
        result *= i
    return result

# Or use tail recursion optimization (if available)
from functools import lru_cache

@lru_cache(maxsize=None)
def factorial_cached(n):
    if n <= 1:
        return 1
    return n * factorial_cached(n - 1)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-e43ee073364be57a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from dataclasses import dataclass

**Example:**

```python
from dataclasses import dataclass

@dataclass
class Point:
    x: int
    y: int

points = [Point(i, i) for i in range(1_000_000)]
# Each Point: ~240 bytes (with __dict__)
# Total: ~240 MB
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-de16e638eec610e6
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

@dataclass(slots=True)

**Example:**

```python
@dataclass(slots=True)
class Point:
    x: int
    y: int
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-29a671ec994d6af8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def add_one(x):

**Example:**

```python
def add_one(x):
    return x + 1

def process(data):
    result = []
    for item in data:  # 1M iterations
        result.append(add_one(item))  # 1M function calls
    return result
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-49c06637bd691c47
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process(data):

**Example:**

```python
def process(data):
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a498e5a55b3e5fe7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import numpy as np

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-05704a8916b63d47
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

import time

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-dfff8c2cc00f661e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def read_all_lines(filepath):

**Example:**

```python
def read_all_lines(filepath):
    with open(filepath) as f:
        return f.readlines()  # Loads entire file into memory

lines = read_all_lines("huge_file.txt")  # May run out of memory
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-fbe0ceb07c5e3183
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def read_lines(filepath):

**Example:**

```python
def read_lines(filepath):
    with open(filepath) as f:
        yield from f  # Generator: one line at a time

for line in read_lines("huge_file.txt"):  # Memory efficient
    process(line)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5beb36c4c635b571
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process_file(filename):

**Example:**

```python
def process_file(filename):
    try:
        with open(filename) as f:
            return f.read()
    except:
        pass  # Silent failure - user has no idea what went wrong
    return None
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-b7c16673e99033dd
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process_file(filename):

**Example:**

```python
def process_file(filename):
    try:
        with open(filename) as f:
            return f.read()
    except FileNotFoundError:
        logger.error(f"File not found: {filename}")
        raise  # Re-raise or return appropriate value
    except PermissionError:
        logger.error(f"Permission denied: {filename}")
        raise
    except Exception as e:
        logger.error(f"Unexpected error: {e}", exc_info=True)
        raise  # Don't hide unexpected errors
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9da1a98dc6c9a02f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

try:

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-413814bca81cf6f4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def find_user(users, user_id):

**Example:**

```python
def find_user(users, user_id):
    try:
        return next(u for u in users if u.id == user_id)
    except StopIteration:
        return None  # Exception for control flow - slow!
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-432c5bff475a8c24
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def find_user(users, user_id):

**Example:**

```python
def find_user(users, user_id):
    for user in users:
        if user.id == user_id:
            return user
    return None  # Normal control flow
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-6e38415fcb44c8b7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process_items(items):

**Example:**

```python
def process_items(items):
    errors = []
    for item in items:
        try:
            process_item(item)
        except Exception as e:
            errors.append(e)
    
    if errors:
        raise ExceptionGroup("Processing failed", errors)  # Preserves all tracebacks
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-c1c64ccc92fa67c7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Counter:

**Example:**

```python
class Counter:
    count = 0  # Class attribute
    
    def increment(self):
        self.count += 1  # Creates instance attribute!

c1 = Counter()
c2 = Counter()

c1.increment()
print(c1.count)  # 1 (instance attribute)
print(c2.count)  # 0 (class attribute)
print(Counter.count)  # 0 (class attribute unchanged)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-528dd6ac5df86700
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Counter:

**Example:**

```python
class Counter:
    count = 0
    
    def increment(self):
        Counter.count += 1  # Explicitly modify class attribute
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9a5d5bbd2de99f2f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Counter:

**Example:**

```python
class Counter:
    def __init__(self):
        self.count = 0  # Instance attribute
    
    def increment(self):
        self.count += 1
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-078eda4072fcfc84
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Descriptor:

**Example:**

```python
class Descriptor:
    def __get__(self, obj, objtype=None):
        return "getter called"
    
    def __set__(self, obj, value):
        print(f"setter called with {value}")

class MyClass:
    attr = Descriptor()  # Descriptor instance

obj = MyClass()
print(obj.attr)  # "getter called" - not the Descriptor object!
obj.attr = 42  # "setter called with 42"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-9d37f9c1ab31c2d3
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

# Descriptors are how @property works internally

**Example:**

```python
# Descriptors are how @property works internally
class Temperature:
    def __init__(self):
        self._celsius = 0
    
    @property
    def celsius(self):
        return self._celsius
    
    @celsius.setter
    def celsius(self, value):
        self._celsius = value

temp = Temperature()
temp.celsius = 25  # Calls setter
print(temp.celsius)  # Calls getter
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-87bc1122c3336092
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class A:

**Example:**

```python
class A:
    def method(self):
        return "A"

class B:
    def method(self):
        return "B"

class C(A, B):
    pass

class D(B, A):
    pass

c = C()
print(c.method())  # "A" - A comes first in MRO

d = D()
print(d.method())  # "B" - B comes first in MRO
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-078f160440eb9a45
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class E(A, B):

**Example:**

```python
class E(A, B):
    pass

class F(B, A):
    pass

class G(E, F):  # TypeError: Cannot create consistent MRO!
    pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-44985a69921dff57
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

print(C.__mro__)  # (<class 'C'>, <class 'A'>, <class 'B'>, <class 'object'>)

**Example:**

```python
print(C.__mro__)  # (<class 'C'>, <class 'A'>, <class 'B'>, <class 'object'>)
print(D.__mro__)  # (<class 'D'>, <class 'B'>, <class 'A'>, <class 'object'>)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-329b71888f3b1d99
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Base:

**Example:**

```python
class Base:
    def method(self):
        return "Base"

class A(Base):
    pass

class B(Base):
    pass

class C(A, B):  # OK - both inherit from Base
    pass
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-5ecabed39cb6a56f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

class Node:

**Example:**

```python
class Node:
    def __init__(self, value):
        self.value = value
        self.parent = None
        self.children = []
    
    def __del__(self):
        print(f"Deleting {self.value}")

# Create cycle
parent = Node("parent")
child = Node("child")
parent.children.append(child)
child.parent = parent

del parent
del child
# __del__ may not be called immediately due to cycle!
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-18f70380bf371a70
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

import weakref

**Example:**

```python
import weakref

class Node:
    def __init__(self, value):
        self.value = value
        self._parent = None
        self.children = []
    
    @property
    def parent(self):
        return self._parent() if self._parent else None
    
    @parent.setter
    def parent(self, value):
        self._parent = weakref.ref(value) if value else None

# Or break cycles explicitly
def cleanup_node(node):
    node.parent = None
    node.children.clear()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-080b33c5d928b5df
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from datetime import datetime

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1887df6fde8bb0f7
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `generic`

**Pattern:**

from datetime import datetime, timezone

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-72b2adb12ba24e16
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

result = [item.value for item in items if item.is_valid()]

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-612cfdff62b25898
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process(data):

**Example:**

```python
def process(data):
    if data is not None:
        if data.is_valid():
            if data.has_permission():
                return data.process()
    return None
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-a6a890b877c20fd9
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def process(data):

**Example:**

```python
def process(data):
    if data is None:
        return None
    if not data.is_valid():
        return None
    if not data.has_permission():
        return None
    return data.process()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-15ad98257122dbea
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def get_status_message(status):

**Example:**

```python
def get_status_message(status):
    if status == "pending":
        return "Waiting for approval"
    elif status == "approved":
        return "Request approved"
    elif status == "rejected":
        return "Request rejected"
    else:
        return "Unknown status"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-567a81fb4057ab97
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

def get_status_message(status):

**Example:**

```python
def get_status_message(status):
    match status:
        case "pending":
            return "Waiting for approval"
        case "approved":
            return "Request approved"
        case "rejected":
            return "Request rejected"
        case _:
            return "Unknown status"
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-1ef635c2f2555b97
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `python-structure`

**Pattern:**

x = "global"

**Example:**

```python
x = "global"

def outer():
    x = "enclosing"
    
    def inner():
        x = "local"
        print(x)  # Output: "local" (L found first)
    
    inner()

outer()
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODE-d38418aa94444585
- **Chapter:** `GLOBAL`
- **Language:** `mermaid`
- **Pattern Type:** `generic`

**Pattern:**

flowchart TD

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-14d39d042ae0155f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import sys

**Example:**

```python
import sys

class RegularPoint:
    def __init__(self, x, y):
        self.x = x
        self.y = y

class SlottedPoint:
    __slots__ = ("x", "y")
    
    def __init__(self, x, y):
        self.x = x
        self.y = y

# Create 1 million instances
regular_points = [RegularPoint(i, i) for i in range(1_000_000)]
slotted_points = [SlottedPoint(i, i) for i in range(1_000_000)]

# Memory usage (approximate)
regular_size = sys.getsizeof(regular_points[0]) * 1_000_000
slotted_size = sys.getsizeof(sl
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-687ea79c2ab35225
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

# Application configuration with precedence

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-8d6d08193b44b1a4
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import tracemalloc

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-0ca61ef7e14114da
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import tracemalloc

**Example:**

```python
import tracemalloc
import sys

def process_data():
    """Simulate memory-intensive operation."""
    # Allocate large list
    data = [list(range(1000)) for _ in range(1000)]
    
    # Process data
    result = sum(len(item) for item in data)
    
    return result

# Start tracing
tracemalloc.start()

# Run workload
result = process_data()

# Get snapshot
snapshot = tracemalloc.take_snapshot()

# Get top 10 memory allocations
top_stats = snapshot.statistics('lineno')

print("Top 10 memory all
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-cb949dd9c23e1d8a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

import time

**Example:**

```python
import time
import numpy as np
from typing import Callable

def benchmark(func: Callable, *args, iterations: int = 5) -> float:
    """Run function multiple times and return average time."""
    times = []
    for _ in range(iterations):
        start = time.perf_counter()
        func(*args)
        times.append(time.perf_counter() - start)
    return sum(times) / len(times)

# Test functions
def python_loop(n: int):
    return [i * 2 for i in range(n)]

def numpy_vectorized(n: int):
    return
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-5dd09796ae984796
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Pool

**Example:**

```python
from multiprocessing import Pool
from concurrent.futures import ProcessPoolExecutor
import time

def cpu_task(n: int) -> int:
    """CPU-intensive task."""
    return sum(i * i for i in range(n))

# Single process
start = time.perf_counter()
results = [cpu_task(1_000_000) for _ in range(8)]
single_time = time.perf_counter() - start

# Multiprocessing (4 cores)
start = time.perf_counter()
with ProcessPoolExecutor(max_workers=4) as executor:
    results = list(executor.map(cpu_task, [1_000_000] * 
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-a4eaeec87d789bc0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from concurrent.futures import ProcessPoolExecutor, as_completed

**Example:**

```python
from concurrent.futures import ProcessPoolExecutor, as_completed
import time

def expensive_computation(n: int) -> int:
    """CPU-intensive computation."""
    result = sum(i * i for i in range(n))
    return result

if __name__ == "__main__":
    data = [1000000, 2000000, 3000000, 4000000, 5000000]
    
    # Process pool with automatic cleanup
    with ProcessPoolExecutor(max_workers=4) as executor:
        # Submit tasks
        futures = [executor.submit(expensive_computation, n) for n in d
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-d0612a80c359ed93
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Process, Value, Array

**Example:**

```python
from multiprocessing import Process, Value, Array
import time

def increment_counter(counter: Value, lock):
    """Increment shared counter."""
    for _ in range(100000):
        with lock:
            counter.value += 1

if __name__ == "__main__":
    # Shared integer (Value)
    counter = Value('i', 0)  # 'i' = integer type
    lock = multiprocessing.Lock()
    
    # Create processes
    processes = [
        Process(target=increment_counter, args=(counter, lock))
        for _ in range(4)
 
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-bd4bee11f2650250
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Process, Array, Lock

**Example:**

```python
from multiprocessing import Process, Array, Lock
import math

def compute_row(arr: Array, row: int, cols: int, lock: Lock):
    """Compute values for one row."""
    for col in range(cols):
        index = row * cols + col
        with lock:
            arr[index] = math.sin(row) * math.cos(col)

if __name__ == "__main__":
    rows, cols = 1000, 1000
    shared_matrix = Array('d', [0.0] * (rows * cols))
    lock = Lock()
    
    # Process each row in parallel
    processes = [
        Process(t
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-c8009a33c81bf06a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from multiprocessing import Manager, Process

**Example:**

```python
from multiprocessing import Manager, Process
import time

def worker(task_queue: 'Queue', result_dict: dict, worker_id: int):
    """Worker process."""
    while True:
        task = task_queue.get()
        if task is None:  # Sentinel
            break
        
        # Process task
        result = task * 2
        result_dict[task] = result
        print(f"Worker {worker_id} processed task {task}")

if __name__ == "__main__":
    manager = Manager()
    task_queue = manager.Queue()
    resu
...
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-36656e23bc812de8
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

# ‚ùå BAD: Large objects passed to processes

**Example:**

```python
# ‚ùå BAD: Large objects passed to processes
large_data = [list(range(10000)) for _ in range(1000)]

def process(data):
    return sum(sum(row) for row in data)

# Each process receives full copy ‚Üí huge memory usage
with ProcessPoolExecutor() as executor:
    results = executor.map(process, [large_data] * 10)

# ‚úÖ BETTER: Pass indices or file paths
def process_by_index(start_idx, end_idx):
    # Load data in process
    data = load_data_slice(start_idx, end_idx)
    return process(data)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-6f7c54d3d453db18
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from typing import List, Dict, Any, Callable

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-076e9f9d7b3d371e
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from typing import List, Dict, Any, Optional

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-0da25cb4f1ee5823
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

from functools import lru_cache

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-1f19922d0565e211
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

# Variables

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-d6331744e8007938
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

def find_item(items, target):

**Example:**

```python
def find_item(items, target):
    if target in items:  # Fast membership check
        return items.index(target)
    return -1

# Or use dict for O(1) lookup
item_dict = {item: idx for idx, item in enumerate(large_list)}
idx = item_dict.get(target, -1)
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-61c98a588fe31cfe
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

# Use tuples for simple data

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-8abd55b1f342cc52
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

def process(data):

**Example:**

```python
def process(data):
    # Inline operation or use list comprehension (faster)
    return [x + 1 for x in data]  # No function call overhead

# Or use NumPy for large arrays
import numpy as np
result = np.array(data) + 1  # Vectorized
```

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-afe67857534542c0
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

# Batch creation or use simpler types

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### CODEPAT-5b40545e594a027c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `comprehension`

**Pattern:**

# Option 1: Iterate over copy

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-b13c12722f46fb88
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

This pattern is industry-standard.

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-2ac642fec7824b0c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

20.13 Enterprise Design Patterns for Async Web Apps

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-2c066260dcbead38
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

20.13.2 Pattern: Request-Scoped DB Sessions

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-2696c6aac207d43c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

20.13.3 Pattern: Message-Driven Integrations

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-6cdd18dc62975c3c
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

22.8 Deployment Patterns

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-00e5487a5188aa17
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

22.8.2 Pattern: Multi-Container Application

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-5df15b5b52fd199d
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

22.8.3 Pattern: Serverless Deployment

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-9bfab1ca3b6ba144
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

> **Quick Answer:**  

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-c2e628dbd8cdf7c2
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

29.4.2 ‚Äî Pattern-Based Cleanup Pass

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-514204ab0ff3fd34
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

ReAct (Reasoning + Acting) is a powerful pattern for tool-using agents:

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-c4924585a6f4e883
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

‚ùå **Anti-Pattern: Global State Mutation**

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-baa354d5cda5018a
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

‚ùå **Anti-Pattern: Over-Complicated Factory**

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-b4e35ec5f82cc387
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

‚ùå **Anti-Pattern: Global Dependencies**

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-60df7f6ffd9e657f
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

OOP design pattern that converts one interface into another.

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-a8651807a3c86561
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

Pattern for passing dependencies explicitly.

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-24f1a57d3f4c9229
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

A design pattern that provides a simplified interface to a complex subsystem.

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-a7c1ddd10f199c43
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

Pattern to prevent code from executing on import.

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-fbca9e712b8f2d80
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

Behavioral pattern: subject broadcasts changes to observers.

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-efad23f99a2b9d60
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

Pattern to safely access attributes:

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

### PATTERN-bd167627f8bb3106
- **Chapter:** `GLOBAL`
- **Language:** `python`
- **Pattern Type:** `conceptual`

**Pattern:**

This appendix provides decision matrices to help you choose the right tool, approach, or pattern for your specific use case.

**Rule (Cursor guideline):**

- Prefer this pattern when solving similar problems in `python`.
- When refactoring, move toward this pattern if it improves clarity, safety, or performance.

